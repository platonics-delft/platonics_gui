{"version":3,"sources":["../node_modules/object-assign/index.js","../node_modules/roslib/src/mixin.js","../node_modules/roslib/src/util/shim/WebSocket.js","../node_modules/webworkify/index.js","../node_modules/webworkify-webpack/index.js","../node_modules/roslib/src/util/workerSocketImpl.js","../node_modules/roslib/src/util/workerSocket.js","../node_modules/roslib/src/util/shim/canvas.js","../node_modules/roslib/src/util/shim/decompressPng.js","../node_modules/cbor-js/cbor.js","../node_modules/roslib/src/util/cborTypedArrayTags.js","../node_modules/roslib/src/core/SocketAdapter.js","../node_modules/roslib/src/core/ServiceResponse.js","../node_modules/roslib/src/core/ServiceRequest.js","../node_modules/process/browser.js","../node_modules/eventemitter2/lib/eventemitter2.js","../node_modules/roslib/src/core/Service.js","../node_modules/roslib/src/core/Ros.js","../node_modules/roslib/src/core/Message.js","../node_modules/roslib/src/core/Topic.js","../node_modules/roslib/src/core/Param.js","../node_modules/roslib/src/core/index.js","../node_modules/roslib/src/actionlib/ActionClient.js","../node_modules/roslib/src/actionlib/ActionListener.js","../node_modules/roslib/src/actionlib/Goal.js","../node_modules/roslib/src/actionlib/SimpleActionServer.js","../node_modules/roslib/src/actionlib/index.js","../node_modules/roslib/src/math/Vector3.js","../node_modules/roslib/src/math/Quaternion.js","../node_modules/roslib/src/math/Pose.js","../node_modules/roslib/src/math/Transform.js","../node_modules/roslib/src/math/index.js","../node_modules/roslib/src/tf/TFClient.js","../node_modules/roslib/src/tf/index.js","../node_modules/roslib/src/urdf/UrdfTypes.js","../node_modules/roslib/src/urdf/UrdfBox.js","../node_modules/roslib/src/urdf/UrdfColor.js","../node_modules/roslib/src/urdf/UrdfCylinder.js","../node_modules/roslib/src/urdf/UrdfMaterial.js","../node_modules/roslib/src/urdf/UrdfMesh.js","../node_modules/roslib/src/urdf/UrdfSphere.js","../node_modules/roslib/src/urdf/UrdfVisual.js","../node_modules/roslib/src/urdf/UrdfLink.js","../node_modules/roslib/src/urdf/UrdfJoint.js","../node_modules/roslib/src/util/shim/@xmldom/xmldom.js","../node_modules/roslib/src/urdf/UrdfModel.js","../node_modules/roslib/src/urdf/index.js","../node_modules/roslib/src/RosLib.js","app.ts"],"names":["getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","module","exports","target","source","from","symbols","to","s","arguments","length","key","call","Ros","classes","features","className","Class","options","ros","window","WebSocket","require","self","socket","handleSocketMessage","ev","data","ArrayBuffer","postMessage","handleSocketControl","type","addEventListener","send","close","uri","binaryType","onmessage","onclose","onopen","onerror","work","ReferenceError","workerSocketImpl","WorkerSocket","socket_","handleWorkerMessage_","bind","document","createElement","Canvas","Image","decompressPng","callback","image","onload","canvas","context","getContext","width","height","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","drawImage","imageData","getImageData","jsonData","JSON","parse","src","UPPER32","Math","pow","warnedPrecision","warnPrecision","console","warn","decodeUint64LE","bytes","byteLen","byteLength","offset","byteOffset","arrLen","buffer","slice","uint32View","Uint32Array","arr","Array","si","lo","hi","decodeInt64LE","int32View","Int32Array","decodeNativeArray","ArrayType","nativeArrayTypes","Uint8Array","Uint16Array","Int8Array","Int16Array","Float32Array","Float64Array","conversionArrayTypes","cborTypedArrayTagger","tag","CBOR","typedArrayTagger","BSON","SocketAdapter","client","decoder","handleMessage","message","op","emit","topic","msg","id","service","handlePng","transportOptions","event","isConnected","Blob","reader","FileReader","uint8Array","result","deserialize","readAsArrayBuffer","decodeBSON","decode","bson","ServiceResponse","values","ServiceRequest","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","push","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","EventEmitter2","Service","serviceType","isAdvertised","_serviceCallback","__proto__","callService","request","failedCallback","serviceCallId","idCounter","undefined","callOnConnection","advertise","_serviceResponse","unadvertise","rosbridgeRequest","response","success","socketAdapter","that","transportLibrary","_sendFunc","sendEncodedMessage","groovyCompatibility","setMaxListeners","url","connect","io","constructor","createDataChannel","readyState","CLOSED","sock","toString","authenticate","mac","dest","rand","t","level","end","auth","messageEncoded","emitter","encoder","stringify","setStatusLevel","levelMsg","getActionServers","action_servers","getTopics","topicsClient","getTopicsForType","topicType","topicsForTypeClient","topics","getServices","servicesClient","services","getServicesForType","servicesForTypeClient","getServiceRequestDetails","serviceTypeClient","getServiceResponseDetails","getNodes","nodesClient","nodes","getNodeDetails","node","subscribing","publishing","getParams","paramsClient","names","getTopicType","topicTypeClient","getServiceType","getMessageDetails","messageDetailClient","typedefs","decodeTypeDefs","defs","decodeTypeDefsRec","theType","hints","typeDefDict","fieldnames","arrayLen","fieldarraylen","fieldName","fieldType","fieldtypes","indexOf","sub","j","subResult","getTopicsAndRawTypes","topicsAndRawTypesClient","Message","Topic","messageType","compression","throttle_rate","latch","queue_size","queue_length","reconnect_on_close","callForSubscribeAndAdvertise","waitForReconnect","reconnectFunc","_messageCallback","subscribe","subscribeId","unsubscribe","advertiseId","publish","Param","get","paramClient","value","set","delete","mixin","core","ActionClient","serverName","actionName","omitFeedback","omitStatus","omitResult","goals","receivedStatus","feedbackListener","statusListener","resultListener","goalTopic","cancelTopic","statusMessage","status_list","status","goal","goal_id","feedbackMessage","feedback","resultMessage","cancel","cancelMessage","dispose","ActionListener","goalListener","goalMessage","Goal","actionClient","isFinished","date","Date","goalID","random","getTime","stamp","secs","nsecs","SimpleActionServer","feedbackPublisher","statusPublisher","resultPublisher","cancelListener","header","frame_id","currentGoal","nextGoal","isEarlier","t1","t2","setInterval","currentTime","floor","round","setSucceeded","setAborted","sendFeedback","setPreempted","action","Vector3","x","y","z","add","v","subtract","multiplyQuaternion","q","ix","w","iy","iz","iw","clone","Quaternion","conjugate","norm","sqrt","normalize","l","invert","multiply","newX","newY","newZ","newW","Pose","position","orientation","applyTransform","tf","rotation","translation","tmp","pose","p","getInverse","inverse","Transform","TFClient","fixedFrame","angularThres","transThres","rate","updateDelay","seconds","topicTimeout","repubServiceName","currentTopic","frameInfos","republisherUpdateRequested","_subscribeCB","_isDisposed","serviceClient","processTFArray","transforms","transform","frameID","child_frame_id","substring","info","cbs","cb","updateGoal","source_frames","target_frame","angular_thres","trans_thres","processResponse","topic_name","idx","splice","URDF_SPHERE","URDF_BOX","URDF_CYLINDER","URDF_MESH","UrdfTypes","UrdfBox","dimension","xyz","xml","getAttribute","parseFloat","UrdfColor","rgba","r","g","b","a","UrdfCylinder","radius","UrdfMaterial","textureFilename","color","textures","getElementsByTagName","colors","isLink","obj","UrdfMesh","scale","filename","UrdfSphere","UrdfVisual","origin","geometry","material","origins","rpy","phi","the","psi","sin","cos","geoms","geom","shape","childNodes","nodeType","nodeName","materials","UrdfLink","visuals","UrdfJoint","parents","parent","children","child","limits","minval","maxval","DOMImplementation","XMLSerializer","DOMParser","XPATH_FIRST_ORDERED_NODE_TYPE","UrdfModel","xmlDoc","string","links","joints","parseFromString","robotXml","documentElement","tagName","link","mat","joint","ROSLIB","REVISION"],"mappings":"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","file":"app.87e90a33.js","sourceRoot":"../src","sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Mixin a feature to the core/Ros prototype.\n * For example, mixin(Ros, ['Topic'], {Topic: <Topic>})\n * will add a topic bound to any Ros instances so a user\n * can call `var topic = ros.Topic({name: '/foo'});`\n *\n * @author Graeme Yeates - github.com/megawac\n */\nmodule.exports = function(Ros, classes, features) {\n    classes.forEach(function(className) {\n        var Class = features[className];\n        Ros.prototype[className] = function(options) {\n            options.ros = this;\n            return new Class(options);\n        };\n    });\n};\n","module.exports = typeof window !== 'undefined' ? window.WebSocket : WebSocket;\n","var bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n","function webpackBootstrapFunc (modules) {\n/******/  // The module cache\n/******/  var installedModules = {};\n\n/******/  // The require function\n/******/  function __webpack_require__(moduleId) {\n\n/******/    // Check if module is in cache\n/******/    if(installedModules[moduleId])\n/******/      return installedModules[moduleId].exports;\n\n/******/    // Create a new module (and put it into the cache)\n/******/    var module = installedModules[moduleId] = {\n/******/      i: moduleId,\n/******/      l: false,\n/******/      exports: {}\n/******/    };\n\n/******/    // Execute the module function\n/******/    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/    // Flag the module as loaded\n/******/    module.l = true;\n\n/******/    // Return the exports of the module\n/******/    return module.exports;\n/******/  }\n\n/******/  // expose the modules object (__webpack_modules__)\n/******/  __webpack_require__.m = modules;\n\n/******/  // expose the module cache\n/******/  __webpack_require__.c = installedModules;\n\n/******/  // identity function for calling harmony imports with the correct context\n/******/  __webpack_require__.i = function(value) { return value; };\n\n/******/  // define getter function for harmony exports\n/******/  __webpack_require__.d = function(exports, name, getter) {\n/******/    if(!__webpack_require__.o(exports, name)) {\n/******/      Object.defineProperty(exports, name, {\n/******/        configurable: false,\n/******/        enumerable: true,\n/******/        get: getter\n/******/      });\n/******/    }\n/******/  };\n\n/******/  // define __esModule on exports\n/******/  __webpack_require__.r = function(exports) {\n/******/    Object.defineProperty(exports, '__esModule', { value: true });\n/******/  };\n\n/******/  // getDefaultExport function for compatibility with non-harmony modules\n/******/  __webpack_require__.n = function(module) {\n/******/    var getter = module && module.__esModule ?\n/******/      function getDefault() { return module['default']; } :\n/******/      function getModuleExports() { return module; };\n/******/    __webpack_require__.d(getter, 'a', getter);\n/******/    return getter;\n/******/  };\n\n/******/  // Object.prototype.hasOwnProperty.call\n/******/  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n/******/  // __webpack_public_path__\n/******/  __webpack_require__.p = \"/\";\n\n/******/  // on error function for async loading\n/******/  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE)\n  return f.default || f // try to call default if defined to also support babel esmodule exports\n}\n\nvar moduleNameReqExp = '[\\\\.|\\\\-|\\\\+|\\\\w|\\/|@]+'\nvar dependencyRegExp = '\\\\(\\\\s*(\\/\\\\*.*?\\\\*\\/)?\\\\s*.*?(' + moduleNameReqExp + ').*?\\\\)' // additional chars when output.pathinfo is true\n\n// http://stackoverflow.com/a/2593661/130442\nfunction quoteRegExp (str) {\n  return (str + '').replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&')\n}\n\nfunction isNumeric(n) {\n  return !isNaN(1 * n); // 1 * n converts integers, integers as string (\"123\"), 1e3 and \"1e3\" to integers and strings to NaN\n}\n\nfunction getModuleDependencies (sources, module, queueName) {\n  var retval = {}\n  retval[queueName] = []\n\n  var fnString = module.toString()\n  var wrapperSignature = fnString.match(/^function\\s?\\w*\\(\\w+,\\s*\\w+,\\s*(\\w+)\\)/)\n  if (!wrapperSignature) return retval\n  var webpackRequireName = wrapperSignature[1]\n\n  // main bundle deps\n  var re = new RegExp('(\\\\\\\\n|\\\\W)' + quoteRegExp(webpackRequireName) + dependencyRegExp, 'g')\n  var match\n  while ((match = re.exec(fnString))) {\n    if (match[3] === 'dll-reference') continue\n    retval[queueName].push(match[3])\n  }\n\n  // dll deps\n  re = new RegExp('\\\\(' + quoteRegExp(webpackRequireName) + '\\\\(\"(dll-reference\\\\s(' + moduleNameReqExp + '))\"\\\\)\\\\)' + dependencyRegExp, 'g')\n  while ((match = re.exec(fnString))) {\n    if (!sources[match[2]]) {\n      retval[queueName].push(match[1])\n      sources[match[2]] = __webpack_require__(match[1]).m\n    }\n    retval[match[2]] = retval[match[2]] || []\n    retval[match[2]].push(match[4])\n  }\n\n  // convert 1e3 back to 1000 - this can be important after uglify-js converted 1000 to 1e3\n  var keys = Object.keys(retval);\n  for (var i = 0; i < keys.length; i++) {\n    for (var j = 0; j < retval[keys[i]].length; j++) {\n      if (isNumeric(retval[keys[i]][j])) {\n        retval[keys[i]][j] = 1 * retval[keys[i]][j];\n      }\n    }\n  }\n\n  return retval\n}\n\nfunction hasValuesInQueues (queues) {\n  var keys = Object.keys(queues)\n  return keys.reduce(function (hasValues, key) {\n    return hasValues || queues[key].length > 0\n  }, false)\n}\n\nfunction getRequiredModules (sources, moduleId) {\n  var modulesQueue = {\n    main: [moduleId]\n  }\n  var requiredModules = {\n    main: []\n  }\n  var seenModules = {\n    main: {}\n  }\n\n  while (hasValuesInQueues(modulesQueue)) {\n    var queues = Object.keys(modulesQueue)\n    for (var i = 0; i < queues.length; i++) {\n      var queueName = queues[i]\n      var queue = modulesQueue[queueName]\n      var moduleToCheck = queue.pop()\n      seenModules[queueName] = seenModules[queueName] || {}\n      if (seenModules[queueName][moduleToCheck] || !sources[queueName][moduleToCheck]) continue\n      seenModules[queueName][moduleToCheck] = true\n      requiredModules[queueName] = requiredModules[queueName] || []\n      requiredModules[queueName].push(moduleToCheck)\n      var newModules = getModuleDependencies(sources, sources[queueName][moduleToCheck], queueName)\n      var newModulesKeys = Object.keys(newModules)\n      for (var j = 0; j < newModulesKeys.length; j++) {\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]] || []\n        modulesQueue[newModulesKeys[j]] = modulesQueue[newModulesKeys[j]].concat(newModules[newModulesKeys[j]])\n      }\n    }\n  }\n\n  return requiredModules\n}\n\nmodule.exports = function (moduleId, options) {\n  options = options || {}\n  var sources = {\n    main: __webpack_modules__\n  }\n\n  var requiredModules = options.all ? { main: Object.keys(sources.main) } : getRequiredModules(sources, moduleId)\n\n  var src = ''\n\n  Object.keys(requiredModules).filter(function (m) { return m !== 'main' }).forEach(function (module) {\n    var entryModule = 0\n    while (requiredModules[module][entryModule]) {\n      entryModule++\n    }\n    requiredModules[module].push(entryModule)\n    sources[module][entryModule] = '(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })'\n    src = src + 'var ' + module + ' = (' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(entryModule)) + ')({' + requiredModules[module].map(function (id) { return '' + JSON.stringify(id) + ': ' + sources[module][id].toString() }).join(',') + '});\\n'\n  })\n\n  src = src + 'new ((' + webpackBootstrapFunc.toString().replace('ENTRY_MODULE', JSON.stringify(moduleId)) + ')({' + requiredModules.main.map(function (id) { return '' + JSON.stringify(id) + ': ' + sources.main[id].toString() }).join(',') + '}))(self);'\n\n  var blob = new window.Blob([src], { type: 'text/javascript' })\n  if (options.bare) { return blob }\n\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL\n\n  var workerUrl = URL.createObjectURL(blob)\n  var worker = new window.Worker(workerUrl)\n  worker.objectURL = workerUrl\n\n  return worker\n}\n","var WebSocket = WebSocket || require('ws');\n\nmodule.exports = function(self) {\n  var socket = null;\n\n  function handleSocketMessage(ev) {\n    var data = ev.data;\n\n    if (data instanceof ArrayBuffer) {\n      // binary message, transfer for speed\n      self.postMessage(data, [data]);\n    } else {\n      // JSON message, copy string\n      self.postMessage(data);\n    }\n  }\n\n  function handleSocketControl(ev) {\n    self.postMessage({type: ev.type});\n  }\n\n  self.addEventListener('message', function(ev) {\n    var data = ev.data;\n\n    if (typeof data === 'string') {\n      // JSON message from ROSLIB\n      socket.send(data);\n    } else {\n      // control message\n      if (data.hasOwnProperty('close')) {\n        socket.close();\n        socket = null;\n      } else if (data.hasOwnProperty('uri')) {\n        var uri = data.uri;\n\n        socket = new WebSocket(uri);\n        socket.binaryType = 'arraybuffer';\n\n        socket.onmessage = handleSocketMessage;\n        socket.onclose = handleSocketControl;\n        socket.onopen = handleSocketControl;\n        socket.onerror = handleSocketControl;\n      } else {\n        throw 'Unknown message to WorkerSocket';\n      }\n    }\n  });\n};\n","try {\n    var work = require('webworkify');\n} catch(ReferenceError) {\n    // webworkify raises ReferenceError when required inside webpack\n    var work = require('webworkify-webpack');\n}\nvar workerSocketImpl = require('./workerSocketImpl');\n\nfunction WorkerSocket(uri) {\n  this.socket_ = work(workerSocketImpl);\n\n  this.socket_.addEventListener('message', this.handleWorkerMessage_.bind(this));\n\n  this.socket_.postMessage({\n    uri: uri,\n  });\n}\n\nWorkerSocket.prototype.handleWorkerMessage_ = function(ev) {\n  var data = ev.data;\n  if (data instanceof ArrayBuffer || typeof data === 'string') {\n    // binary or JSON message from rosbridge\n    this.onmessage(ev);\n  } else {\n    // control message from the wrapped WebSocket\n    var type = data.type;\n    if (type === 'close') {\n      this.onclose(null);\n    } else if (type === 'open') {\n      this.onopen(null);\n    } else if (type === 'error') {\n      this.onerror(null);\n    } else {\n      throw 'Unknown message from workersocket';\n    }\n  }\n};\n\nWorkerSocket.prototype.send = function(data) {\n  this.socket_.postMessage(data);\n};\n\nWorkerSocket.prototype.close = function() {\n  this.socket_.postMessage({\n    close: true\n  });\n};\n\nmodule.exports = WorkerSocket;\n","/* global document */\nmodule.exports = function Canvas() {\n\treturn document.createElement('canvas');\n};","/**\n * @fileOverview\n * @author Graeme Yeates - github.com/megawac\n */\n\n'use strict';\n\nvar Canvas = require('canvas');\nvar Image = Canvas.Image || window.Image;\n\n/**\n * If a message was compressed as a PNG image (a compression hack since\n * gzipping over WebSockets * is not supported yet), this function places the\n * \"image\" in a canvas element then decodes the * \"image\" as a Base64 string.\n *\n * @private\n * @param data - An object containing the PNG data.\n * @param callback - Function with the following params:\n * @param callback.data - The uncompressed data.\n */\nfunction decompressPng(data, callback) {\n  // Uncompresses the data before sending it through (use image/canvas to do so).\n  var image = new Image();\n  // When the image loads, extracts the raw data (JSON message).\n  image.onload = function() {\n    // Creates a local canvas to draw on.\n    var canvas = new Canvas();\n    var context = canvas.getContext('2d');\n\n    // Sets width and height.\n    canvas.width = image.width;\n    canvas.height = image.height;\n\n    // Prevents anti-aliasing and loosing data\n    context.imageSmoothingEnabled = false;\n    context.webkitImageSmoothingEnabled = false;\n    context.mozImageSmoothingEnabled = false;\n\n    // Puts the data into the image.\n    context.drawImage(image, 0, 0);\n    // Grabs the raw, uncompressed data.\n    var imageData = context.getImageData(0, 0, image.width, image.height).data;\n\n    // Constructs the JSON.\n    var jsonData = '';\n    for (var i = 0; i < imageData.length; i += 4) {\n      // RGB\n      jsonData += String.fromCharCode(imageData[i], imageData[i + 1], imageData[i + 2]);\n    }\n    callback(JSON.parse(jsonData));\n  };\n  // Sends the image data to load.\n  image.src = 'data:image/png;base64,' + data;\n}\n\nmodule.exports = decompressPng;\n","/*\r\n * The MIT License (MIT)\r\n *\r\n * Copyright (c) 2014 Patrick Gansterer <paroga@paroga.com>\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n * SOFTWARE.\r\n */\r\n\r\n(function(global, undefined) { \"use strict\";\r\nvar POW_2_24 = Math.pow(2, -24),\r\n    POW_2_32 = Math.pow(2, 32),\r\n    POW_2_53 = Math.pow(2, 53);\r\n\r\nfunction encode(value) {\r\n  var data = new ArrayBuffer(256);\r\n  var dataView = new DataView(data);\r\n  var lastLength;\r\n  var offset = 0;\r\n\r\n  function ensureSpace(length) {\r\n    var newByteLength = data.byteLength;\r\n    var requiredLength = offset + length;\r\n    while (newByteLength < requiredLength)\r\n      newByteLength *= 2;\r\n    if (newByteLength !== data.byteLength) {\r\n      var oldDataView = dataView;\r\n      data = new ArrayBuffer(newByteLength);\r\n      dataView = new DataView(data);\r\n      var uint32count = (offset + 3) >> 2;\r\n      for (var i = 0; i < uint32count; ++i)\r\n        dataView.setUint32(i * 4, oldDataView.getUint32(i * 4));\r\n    }\r\n\r\n    lastLength = length;\r\n    return dataView;\r\n  }\r\n  function write() {\r\n    offset += lastLength;\r\n  }\r\n  function writeFloat64(value) {\r\n    write(ensureSpace(8).setFloat64(offset, value));\r\n  }\r\n  function writeUint8(value) {\r\n    write(ensureSpace(1).setUint8(offset, value));\r\n  }\r\n  function writeUint8Array(value) {\r\n    var dataView = ensureSpace(value.length);\r\n    for (var i = 0; i < value.length; ++i)\r\n      dataView.setUint8(offset + i, value[i]);\r\n    write();\r\n  }\r\n  function writeUint16(value) {\r\n    write(ensureSpace(2).setUint16(offset, value));\r\n  }\r\n  function writeUint32(value) {\r\n    write(ensureSpace(4).setUint32(offset, value));\r\n  }\r\n  function writeUint64(value) {\r\n    var low = value % POW_2_32;\r\n    var high = (value - low) / POW_2_32;\r\n    var dataView = ensureSpace(8);\r\n    dataView.setUint32(offset, high);\r\n    dataView.setUint32(offset + 4, low);\r\n    write();\r\n  }\r\n  function writeTypeAndLength(type, length) {\r\n    if (length < 24) {\r\n      writeUint8(type << 5 | length);\r\n    } else if (length < 0x100) {\r\n      writeUint8(type << 5 | 24);\r\n      writeUint8(length);\r\n    } else if (length < 0x10000) {\r\n      writeUint8(type << 5 | 25);\r\n      writeUint16(length);\r\n    } else if (length < 0x100000000) {\r\n      writeUint8(type << 5 | 26);\r\n      writeUint32(length);\r\n    } else {\r\n      writeUint8(type << 5 | 27);\r\n      writeUint64(length);\r\n    }\r\n  }\r\n  \r\n  function encodeItem(value) {\r\n    var i;\r\n\r\n    if (value === false)\r\n      return writeUint8(0xf4);\r\n    if (value === true)\r\n      return writeUint8(0xf5);\r\n    if (value === null)\r\n      return writeUint8(0xf6);\r\n    if (value === undefined)\r\n      return writeUint8(0xf7);\r\n  \r\n    switch (typeof value) {\r\n      case \"number\":\r\n        if (Math.floor(value) === value) {\r\n          if (0 <= value && value <= POW_2_53)\r\n            return writeTypeAndLength(0, value);\r\n          if (-POW_2_53 <= value && value < 0)\r\n            return writeTypeAndLength(1, -(value + 1));\r\n        }\r\n        writeUint8(0xfb);\r\n        return writeFloat64(value);\r\n\r\n      case \"string\":\r\n        var utf8data = [];\r\n        for (i = 0; i < value.length; ++i) {\r\n          var charCode = value.charCodeAt(i);\r\n          if (charCode < 0x80) {\r\n            utf8data.push(charCode);\r\n          } else if (charCode < 0x800) {\r\n            utf8data.push(0xc0 | charCode >> 6);\r\n            utf8data.push(0x80 | charCode & 0x3f);\r\n          } else if (charCode < 0xd800) {\r\n            utf8data.push(0xe0 | charCode >> 12);\r\n            utf8data.push(0x80 | (charCode >> 6)  & 0x3f);\r\n            utf8data.push(0x80 | charCode & 0x3f);\r\n          } else {\r\n            charCode = (charCode & 0x3ff) << 10;\r\n            charCode |= value.charCodeAt(++i) & 0x3ff;\r\n            charCode += 0x10000;\r\n\r\n            utf8data.push(0xf0 | charCode >> 18);\r\n            utf8data.push(0x80 | (charCode >> 12)  & 0x3f);\r\n            utf8data.push(0x80 | (charCode >> 6)  & 0x3f);\r\n            utf8data.push(0x80 | charCode & 0x3f);\r\n          }\r\n        }\r\n\r\n        writeTypeAndLength(3, utf8data.length);\r\n        return writeUint8Array(utf8data);\r\n\r\n      default:\r\n        var length;\r\n        if (Array.isArray(value)) {\r\n          length = value.length;\r\n          writeTypeAndLength(4, length);\r\n          for (i = 0; i < length; ++i)\r\n            encodeItem(value[i]);\r\n        } else if (value instanceof Uint8Array) {\r\n          writeTypeAndLength(2, value.length);\r\n          writeUint8Array(value);\r\n        } else {\r\n          var keys = Object.keys(value);\r\n          length = keys.length;\r\n          writeTypeAndLength(5, length);\r\n          for (i = 0; i < length; ++i) {\r\n            var key = keys[i];\r\n            encodeItem(key);\r\n            encodeItem(value[key]);\r\n          }\r\n        }\r\n    }\r\n  }\r\n  \r\n  encodeItem(value);\r\n\r\n  if (\"slice\" in data)\r\n    return data.slice(0, offset);\r\n  \r\n  var ret = new ArrayBuffer(offset);\r\n  var retView = new DataView(ret);\r\n  for (var i = 0; i < offset; ++i)\r\n    retView.setUint8(i, dataView.getUint8(i));\r\n  return ret;\r\n}\r\n\r\nfunction decode(data, tagger, simpleValue) {\r\n  var dataView = new DataView(data);\r\n  var offset = 0;\r\n  \r\n  if (typeof tagger !== \"function\")\r\n    tagger = function(value) { return value; };\r\n  if (typeof simpleValue !== \"function\")\r\n    simpleValue = function() { return undefined; };\r\n\r\n  function read(value, length) {\r\n    offset += length;\r\n    return value;\r\n  }\r\n  function readArrayBuffer(length) {\r\n    return read(new Uint8Array(data, offset, length), length);\r\n  }\r\n  function readFloat16() {\r\n    var tempArrayBuffer = new ArrayBuffer(4);\r\n    var tempDataView = new DataView(tempArrayBuffer);\r\n    var value = readUint16();\r\n\r\n    var sign = value & 0x8000;\r\n    var exponent = value & 0x7c00;\r\n    var fraction = value & 0x03ff;\r\n    \r\n    if (exponent === 0x7c00)\r\n      exponent = 0xff << 10;\r\n    else if (exponent !== 0)\r\n      exponent += (127 - 15) << 10;\r\n    else if (fraction !== 0)\r\n      return fraction * POW_2_24;\r\n    \r\n    tempDataView.setUint32(0, sign << 16 | exponent << 13 | fraction << 13);\r\n    return tempDataView.getFloat32(0);\r\n  }\r\n  function readFloat32() {\r\n    return read(dataView.getFloat32(offset), 4);\r\n  }\r\n  function readFloat64() {\r\n    return read(dataView.getFloat64(offset), 8);\r\n  }\r\n  function readUint8() {\r\n    return read(dataView.getUint8(offset), 1);\r\n  }\r\n  function readUint16() {\r\n    return read(dataView.getUint16(offset), 2);\r\n  }\r\n  function readUint32() {\r\n    return read(dataView.getUint32(offset), 4);\r\n  }\r\n  function readUint64() {\r\n    return readUint32() * POW_2_32 + readUint32();\r\n  }\r\n  function readBreak() {\r\n    if (dataView.getUint8(offset) !== 0xff)\r\n      return false;\r\n    offset += 1;\r\n    return true;\r\n  }\r\n  function readLength(additionalInformation) {\r\n    if (additionalInformation < 24)\r\n      return additionalInformation;\r\n    if (additionalInformation === 24)\r\n      return readUint8();\r\n    if (additionalInformation === 25)\r\n      return readUint16();\r\n    if (additionalInformation === 26)\r\n      return readUint32();\r\n    if (additionalInformation === 27)\r\n      return readUint64();\r\n    if (additionalInformation === 31)\r\n      return -1;\r\n    throw \"Invalid length encoding\";\r\n  }\r\n  function readIndefiniteStringLength(majorType) {\r\n    var initialByte = readUint8();\r\n    if (initialByte === 0xff)\r\n      return -1;\r\n    var length = readLength(initialByte & 0x1f);\r\n    if (length < 0 || (initialByte >> 5) !== majorType)\r\n      throw \"Invalid indefinite length element\";\r\n    return length;\r\n  }\r\n\r\n  function appendUtf16data(utf16data, length) {\r\n    for (var i = 0; i < length; ++i) {\r\n      var value = readUint8();\r\n      if (value & 0x80) {\r\n        if (value < 0xe0) {\r\n          value = (value & 0x1f) <<  6\r\n                | (readUint8() & 0x3f);\r\n          length -= 1;\r\n        } else if (value < 0xf0) {\r\n          value = (value & 0x0f) << 12\r\n                | (readUint8() & 0x3f) << 6\r\n                | (readUint8() & 0x3f);\r\n          length -= 2;\r\n        } else {\r\n          value = (value & 0x0f) << 18\r\n                | (readUint8() & 0x3f) << 12\r\n                | (readUint8() & 0x3f) << 6\r\n                | (readUint8() & 0x3f);\r\n          length -= 3;\r\n        }\r\n      }\r\n\r\n      if (value < 0x10000) {\r\n        utf16data.push(value);\r\n      } else {\r\n        value -= 0x10000;\r\n        utf16data.push(0xd800 | (value >> 10));\r\n        utf16data.push(0xdc00 | (value & 0x3ff));\r\n      }\r\n    }\r\n  }\r\n\r\n  function decodeItem() {\r\n    var initialByte = readUint8();\r\n    var majorType = initialByte >> 5;\r\n    var additionalInformation = initialByte & 0x1f;\r\n    var i;\r\n    var length;\r\n\r\n    if (majorType === 7) {\r\n      switch (additionalInformation) {\r\n        case 25:\r\n          return readFloat16();\r\n        case 26:\r\n          return readFloat32();\r\n        case 27:\r\n          return readFloat64();\r\n      }\r\n    }\r\n\r\n    length = readLength(additionalInformation);\r\n    if (length < 0 && (majorType < 2 || 6 < majorType))\r\n      throw \"Invalid length\";\r\n\r\n    switch (majorType) {\r\n      case 0:\r\n        return length;\r\n      case 1:\r\n        return -1 - length;\r\n      case 2:\r\n        if (length < 0) {\r\n          var elements = [];\r\n          var fullArrayLength = 0;\r\n          while ((length = readIndefiniteStringLength(majorType)) >= 0) {\r\n            fullArrayLength += length;\r\n            elements.push(readArrayBuffer(length));\r\n          }\r\n          var fullArray = new Uint8Array(fullArrayLength);\r\n          var fullArrayOffset = 0;\r\n          for (i = 0; i < elements.length; ++i) {\r\n            fullArray.set(elements[i], fullArrayOffset);\r\n            fullArrayOffset += elements[i].length;\r\n          }\r\n          return fullArray;\r\n        }\r\n        return readArrayBuffer(length);\r\n      case 3:\r\n        var utf16data = [];\r\n        if (length < 0) {\r\n          while ((length = readIndefiniteStringLength(majorType)) >= 0)\r\n            appendUtf16data(utf16data, length);\r\n        } else\r\n          appendUtf16data(utf16data, length);\r\n        return String.fromCharCode.apply(null, utf16data);\r\n      case 4:\r\n        var retArray;\r\n        if (length < 0) {\r\n          retArray = [];\r\n          while (!readBreak())\r\n            retArray.push(decodeItem());\r\n        } else {\r\n          retArray = new Array(length);\r\n          for (i = 0; i < length; ++i)\r\n            retArray[i] = decodeItem();\r\n        }\r\n        return retArray;\r\n      case 5:\r\n        var retObject = {};\r\n        for (i = 0; i < length || length < 0 && !readBreak(); ++i) {\r\n          var key = decodeItem();\r\n          retObject[key] = decodeItem();\r\n        }\r\n        return retObject;\r\n      case 6:\r\n        return tagger(decodeItem(), length);\r\n      case 7:\r\n        switch (length) {\r\n          case 20:\r\n            return false;\r\n          case 21:\r\n            return true;\r\n          case 22:\r\n            return null;\r\n          case 23:\r\n            return undefined;\r\n          default:\r\n            return simpleValue(length);\r\n        }\r\n    }\r\n  }\r\n\r\n  var ret = decodeItem();\r\n  if (offset !== data.byteLength)\r\n    throw \"Remaining bytes\";\r\n  return ret;\r\n}\r\n\r\nvar obj = { encode: encode, decode: decode };\r\n\r\nif (typeof define === \"function\" && define.amd)\r\n  define(\"cbor/cbor\", obj);\r\nelse if (typeof module !== 'undefined' && module.exports)\r\n  module.exports = obj;\r\nelse if (!global.CBOR)\r\n  global.CBOR = obj;\r\n\r\n})(this);\r\n","'use strict';\n\nvar UPPER32 = Math.pow(2, 32);\n\nvar warnedPrecision = false;\nfunction warnPrecision() {\n  if (!warnedPrecision) {\n    warnedPrecision = true;\n    console.warn('CBOR 64-bit integer array values may lose precision. No further warnings.');\n  }\n}\n\n/**\n * Unpack 64-bit unsigned integer from byte array.\n * @param {Uint8Array} bytes\n*/\nfunction decodeUint64LE(bytes) {\n  warnPrecision();\n\n  var byteLen = bytes.byteLength;\n  var offset = bytes.byteOffset;\n  var arrLen = byteLen / 8;\n\n  var buffer = bytes.buffer.slice(offset, offset + byteLen);\n  var uint32View = new Uint32Array(buffer);\n\n  var arr = new Array(arrLen);\n  for (var i = 0; i < arrLen; i++) {\n    var si = i * 2;\n    var lo = uint32View[si];\n    var hi = uint32View[si+1];\n    arr[i] = lo + UPPER32 * hi;\n  }\n\n  return arr;\n}\n\n/**\n * Unpack 64-bit signed integer from byte array.\n * @param {Uint8Array} bytes\n*/\nfunction decodeInt64LE(bytes) {\n  warnPrecision();\n\n  var byteLen = bytes.byteLength;\n  var offset = bytes.byteOffset;\n  var arrLen = byteLen / 8;\n\n  var buffer = bytes.buffer.slice(offset, offset + byteLen);\n  var uint32View = new Uint32Array(buffer);\n  var int32View = new Int32Array(buffer);\n\n  var arr = new Array(arrLen);\n  for (var i = 0; i < arrLen; i++) {\n    var si = i * 2;\n    var lo = uint32View[si];\n    var hi = int32View[si+1];\n    arr[i] = lo + UPPER32 * hi;\n  }\n\n  return arr;\n}\n\n/**\n * Unpack typed array from byte array.\n * @param {Uint8Array} bytes\n * @param {type} ArrayType - Desired output array type\n*/\nfunction decodeNativeArray(bytes, ArrayType) {\n  var byteLen = bytes.byteLength;\n  var offset = bytes.byteOffset;\n  var buffer = bytes.buffer.slice(offset, offset + byteLen);\n  return new ArrayType(buffer);\n}\n\n/**\n * Supports a subset of draft CBOR typed array tags:\n *     <https://tools.ietf.org/html/draft-ietf-cbor-array-tags-00>\n *\n * Only supports little-endian tags for now.\n */\nvar nativeArrayTypes = {\n  64: Uint8Array,\n  69: Uint16Array,\n  70: Uint32Array,\n  72: Int8Array,\n  77: Int16Array,\n  78: Int32Array,\n  85: Float32Array,\n  86: Float64Array\n};\n\n/**\n * We can also decode 64-bit integer arrays, since ROS has these types.\n */\nvar conversionArrayTypes = {\n  71: decodeUint64LE,\n  79: decodeInt64LE\n};\n\n/**\n * Handle CBOR typed array tags during decoding.\n * @param {Uint8Array} data\n * @param {Number} tag\n */\nfunction cborTypedArrayTagger(data, tag) {\n  if (tag in nativeArrayTypes) {\n    var arrayType = nativeArrayTypes[tag];\n    return decodeNativeArray(data, arrayType);\n  }\n  if (tag in conversionArrayTypes) {\n    return conversionArrayTypes[tag](data);\n  }\n  return data;\n}\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = cborTypedArrayTagger;\n}\n","/**\n * Socket event handling utilities for handling events on either\n * WebSocket and TCP sockets\n *\n * Note to anyone reviewing this code: these functions are called\n * in the context of their parent object, unless bound\n * @fileOverview\n */\n'use strict';\n\nvar decompressPng = require('../util/decompressPng');\nvar CBOR = require('cbor-js');\nvar typedArrayTagger = require('../util/cborTypedArrayTags');\nvar BSON = null;\nif(typeof bson !== 'undefined'){\n    BSON = bson().BSON;\n}\n\n/**\n * Event listeners for a WebSocket or TCP socket to a JavaScript\n * ROS Client. Sets up Messages for a given topic to trigger an\n * event on the ROS client.\n *\n * @namespace SocketAdapter\n * @private\n */\nfunction SocketAdapter(client) {\n  var decoder = null;\n  if (client.transportOptions.decoder) {\n    decoder = client.transportOptions.decoder;\n  }\n\n  function handleMessage(message) {\n    if (message.op === 'publish') {\n      client.emit(message.topic, message.msg);\n    } else if (message.op === 'service_response') {\n      client.emit(message.id, message);\n    } else if (message.op === 'call_service') {\n      client.emit(message.service, message);\n    } else if(message.op === 'status'){\n      if(message.id){\n        client.emit('status:'+message.id, message);\n      } else {\n        client.emit('status', message);\n      }\n    }\n  }\n\n  function handlePng(message, callback) {\n    if (message.op === 'png') {\n      decompressPng(message.data, callback);\n    } else {\n      callback(message);\n    }\n  }\n\n  function decodeBSON(data, callback) {\n    if (!BSON) {\n      throw 'Cannot process BSON encoded message without BSON header.';\n    }\n    var reader = new FileReader();\n    reader.onload  = function() {\n      var uint8Array = new Uint8Array(this.result);\n      var msg = BSON.deserialize(uint8Array);\n      callback(msg);\n    };\n    reader.readAsArrayBuffer(data);\n  }\n\n  return {\n    /**\n     * Emit a 'connection' event on WebSocket connection.\n     *\n     * @param {function} event - The argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onopen: function onOpen(event) {\n      client.isConnected = true;\n      client.emit('connection', event);\n    },\n\n    /**\n     * Emit a 'close' event on WebSocket disconnection.\n     *\n     * @param {function} event - The argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onclose: function onClose(event) {\n      client.isConnected = false;\n      client.emit('close', event);\n    },\n\n    /**\n     * Emit an 'error' event whenever there was an error.\n     *\n     * @param {function} event - The argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onerror: function onError(event) {\n      client.emit('error', event);\n    },\n\n    /**\n     * Parse message responses from rosbridge and send to the appropriate\n     * topic, service, or param.\n     *\n     * @param {Object} data - The raw JSON message from rosbridge.\n     * @memberof SocketAdapter\n     */\n    onmessage: function onMessage(data) {\n      if (decoder) {\n        decoder(data.data, function (message) {\n          handleMessage(message);\n        });\n      } else if (typeof Blob !== 'undefined' && data.data instanceof Blob) {\n        decodeBSON(data.data, function (message) {\n          handlePng(message, handleMessage);\n        });\n      } else if (data.data instanceof ArrayBuffer) {\n        var decoded = CBOR.decode(data.data, typedArrayTagger);\n        handleMessage(decoded);\n      } else {\n        var message = JSON.parse(typeof data === 'string' ? data : data.data);\n        handlePng(message, handleMessage);\n      }\n    }\n  };\n}\n\nmodule.exports = SocketAdapter;\n","/**\n * @fileOverview\n * @author Brandon Alexander - balexander@willowgarage.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * A ServiceResponse is returned from the service call.\n *\n * @constructor\n * @param {Object} values - Object matching the fields defined in the .srv definition file.\n */\nfunction ServiceResponse(values) {\n  assign(this, values);\n}\n\nmodule.exports = ServiceResponse;","/**\n * @fileOverview\n * @author Brandon Alexander - balexander@willowgarage.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * A ServiceRequest is passed into the service call.\n *\n * @constructor\n * @param {Object} values - Object matching the fields defined in the .srv definition file.\n */\nfunction ServiceRequest(values) {\n  assign(this, values);\n}\n\nmodule.exports = ServiceRequest;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? values.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","/**\n * @fileOverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar ServiceResponse = require('./ServiceResponse');\nvar ServiceRequest = require('./ServiceRequest');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * A ROS service client.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.name - The service name, like '/add_two_ints'.\n * @param {string} options.serviceType - The service type, like 'rospy_tutorials/AddTwoInts'.\n */\nfunction Service(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n  this.serviceType = options.serviceType;\n  this.isAdvertised = false;\n\n  this._serviceCallback = null;\n}\nService.prototype.__proto__ = EventEmitter2.prototype;\n/**\n * Call the service. Returns the service response in the\n * callback. Does nothing if this service is currently advertised.\n *\n * @param {ServiceRequest} request - The ROSLIB.ServiceRequest to send.\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.response - The response from the service request.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nService.prototype.callService = function(request, callback, failedCallback) {\n  if (this.isAdvertised) {\n    return;\n  }\n\n  var serviceCallId = 'call_service:' + this.name + ':' + (++this.ros.idCounter);\n\n  if (callback || failedCallback) {\n    this.ros.once(serviceCallId, function(message) {\n      if (message.result !== undefined && message.result === false) {\n        if (typeof failedCallback === 'function') {\n          failedCallback(message.values);\n        }\n      } else if (typeof callback === 'function') {\n        callback(new ServiceResponse(message.values));\n      }\n    });\n  }\n\n  var call = {\n    op : 'call_service',\n    id : serviceCallId,\n    service : this.name,\n    type: this.serviceType,\n    args : request\n  };\n  this.ros.callOnConnection(call);\n};\n\n/**\n * Advertise the service. This turns the Service object from a client\n * into a server. The callback will be called with every request\n * that's made on this service.\n *\n * @param {function} callback - This works similarly to the callback for a C++ service and should take the following params:\n * @param {ServiceRequest} callback.request - The service request.\n * @param {Object} callback.response - An empty dictionary. Take care not to overwrite this. Instead, only modify the values within.\n *     It should return true if the service has finished successfully,\n *     i.e., without any fatal errors.\n */\nService.prototype.advertise = function(callback) {\n  if (this.isAdvertised || typeof callback !== 'function') {\n    return;\n  }\n\n  this._serviceCallback = callback;\n  this.ros.on(this.name, this._serviceResponse.bind(this));\n  this.ros.callOnConnection({\n    op: 'advertise_service',\n    type: this.serviceType,\n    service: this.name\n  });\n  this.isAdvertised = true;\n};\n\nService.prototype.unadvertise = function() {\n  if (!this.isAdvertised) {\n    return;\n  }\n  this.ros.callOnConnection({\n    op: 'unadvertise_service',\n    service: this.name\n  });\n  this.isAdvertised = false;\n};\n\nService.prototype._serviceResponse = function(rosbridgeRequest) {\n  var response = {};\n  var success = this._serviceCallback(rosbridgeRequest.args, response);\n\n  var call = {\n    op: 'service_response',\n    service: this.name,\n    values: new ServiceResponse(response),\n    result: success\n  };\n\n  if (rosbridgeRequest.id) {\n    call.id = rosbridgeRequest.id;\n  }\n\n  this.ros.callOnConnection(call);\n};\n\nmodule.exports = Service;\n","/**\n * @fileOverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar WebSocket = require('ws');\nvar WorkerSocket = require('../util/workerSocket');\nvar socketAdapter = require('./SocketAdapter.js');\n\nvar Service = require('./Service');\nvar ServiceRequest = require('./ServiceRequest');\n\nvar assign = require('object-assign');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * Manages connection to the server and all interactions with ROS.\n *\n * Emits the following events:\n *  * 'error' - There was an error with ROS.\n *  * 'connection' - Connected to the WebSocket server.\n *  * 'close' - Disconnected to the WebSocket server.\n *  * &#60;topicName&#62; - A message came from rosbridge with the given topic name.\n *  * &#60;serviceID&#62; - A service response came from rosbridge with the given ID.\n *\n * @constructor\n * @param {Object} options\n * @param {string} [options.url] - The WebSocket URL for rosbridge or the node server URL to connect using socket.io (if socket.io exists in the page). Can be specified later with `connect`.\n * @param {boolean} [options.groovyCompatibility=true] - Don't use interfaces that changed after the last groovy release or rosbridge_suite and related tools.\n * @param {string} [options.transportLibrary=websocket] - One of 'websocket', 'workersocket', 'socket.io' or RTCPeerConnection instance controlling how the connection is created in `connect`.\n * @param {Object} [options.transportOptions={}] - The options to use when creating a connection. Currently only used if `transportLibrary` is RTCPeerConnection.\n */\nfunction Ros(options) {\n  options = options || {};\n  var that = this;\n  this.socket = null;\n  this.idCounter = 0;\n  this.isConnected = false;\n  this.transportLibrary = options.transportLibrary || 'websocket';\n  this.transportOptions = options.transportOptions || {};\n  this._sendFunc = function(msg) { that.sendEncodedMessage(msg); };\n\n  if (typeof options.groovyCompatibility === 'undefined') {\n    this.groovyCompatibility = true;\n  }\n  else {\n    this.groovyCompatibility = options.groovyCompatibility;\n  }\n\n  // Sets unlimited event listeners.\n  this.setMaxListeners(0);\n\n  // begin by checking if a URL was given\n  if (options.url) {\n    this.connect(options.url);\n  }\n}\n\nRos.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Connect to the specified WebSocket.\n *\n * @param {string} url - WebSocket URL or RTCDataChannel label for rosbridge.\n */\nRos.prototype.connect = function(url) {\n  if (this.transportLibrary === 'socket.io') {\n    this.socket = assign(io(url, {'force new connection': true}), socketAdapter(this));\n    this.socket.on('connect', this.socket.onopen);\n    this.socket.on('data', this.socket.onmessage);\n    this.socket.on('close', this.socket.onclose);\n    this.socket.on('error', this.socket.onerror);\n  } else if (this.transportLibrary.constructor.name === 'RTCPeerConnection') {\n    this.socket = assign(this.transportLibrary.createDataChannel(url, this.transportOptions), socketAdapter(this));\n  } else if (this.transportLibrary === 'websocket') {\n    if (!this.socket || this.socket.readyState === WebSocket.CLOSED) {\n      var sock = new WebSocket(url);\n      sock.binaryType = 'arraybuffer';\n      this.socket = assign(sock, socketAdapter(this));\n    }\n  } else if (this.transportLibrary === 'workersocket') {\n    this.socket = assign(new WorkerSocket(url), socketAdapter(this));\n  } else {\n    throw 'Unknown transportLibrary: ' + this.transportLibrary.toString();\n  }\n\n};\n\n/**\n * Disconnect from the WebSocket server.\n */\nRos.prototype.close = function() {\n  if (this.socket) {\n    this.socket.close();\n  }\n};\n\n/**\n * Send an authorization request to the server.\n *\n * @param {string} mac - MAC (hash) string given by the trusted source.\n * @param {string} client - IP of the client.\n * @param {string} dest - IP of the destination.\n * @param {string} rand - Random string given by the trusted source.\n * @param {Object} t - Time of the authorization request.\n * @param {string} level - User level as a string given by the client.\n * @param {Object} end - End time of the client's session.\n */\nRos.prototype.authenticate = function(mac, client, dest, rand, t, level, end) {\n  // create the request\n  var auth = {\n    op : 'auth',\n    mac : mac,\n    client : client,\n    dest : dest,\n    rand : rand,\n    t : t,\n    level : level,\n    end : end\n  };\n  // send the request\n  this.callOnConnection(auth);\n};\n\n/**\n * Send an encoded message over the WebSocket.\n *\n * @param {Object} messageEncoded - The encoded message to be sent.\n */\nRos.prototype.sendEncodedMessage = function(messageEncoded) {\n  var emitter = null;\n  var that = this;\n  if (this.transportLibrary === 'socket.io') {\n    emitter = function(msg){that.socket.emit('operation', msg);};\n  } else {\n    emitter = function(msg){that.socket.send(msg);};\n  }\n\n  if (!this.isConnected) {\n    that.once('connection', function() {\n      emitter(messageEncoded);\n    });\n  } else {\n    emitter(messageEncoded);\n  }\n};\n\n/**\n * Send the message over the WebSocket, but queue the message up if not yet\n * connected.\n *\n * @param {Object} message - The message to be sent.\n */\nRos.prototype.callOnConnection = function(message) {\n  if (this.transportOptions.encoder) {\n    this.transportOptions.encoder(message, this._sendFunc);\n  } else {\n    this._sendFunc(JSON.stringify(message));\n  }\n};\n\n/**\n * Send a set_level request to the server.\n *\n * @param {string} level - Status level (none, error, warning, info).\n * @param {number} [id] - Operation ID to change status level on.\n */\nRos.prototype.setStatusLevel = function(level, id){\n  var levelMsg = {\n    op: 'set_level',\n    level: level,\n    id: id\n  };\n\n  this.callOnConnection(levelMsg);\n};\n\n/**\n * Retrieve a list of action servers in ROS as an array of string.\n *\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.actionservers - Array of action server names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getActionServers = function(callback, failedCallback) {\n  var getActionServers = new Service({\n    ros : this,\n    name : '/rosapi/action_servers',\n    serviceType : 'rosapi/GetActionServers'\n  });\n\n  var request = new ServiceRequest({});\n  if (typeof failedCallback === 'function'){\n    getActionServers.callService(request,\n      function(result) {\n        callback(result.action_servers);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    getActionServers.callService(request, function(result) {\n      callback(result.action_servers);\n    });\n  }\n};\n\n/**\n * Retrieve a list of topics in ROS as an array.\n *\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.result - The result object with the following params:\n * @param {string[]} callback.result.topics - Array of topic names.\n * @param {string[]} callback.result.types - Array of message type names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getTopics = function(callback, failedCallback) {\n  var topicsClient = new Service({\n    ros : this,\n    name : '/rosapi/topics',\n    serviceType : 'rosapi/Topics'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    topicsClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicsClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieve a list of topics in ROS as an array of a specific type.\n *\n * @param {string} topicType - The topic type to find.\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.topics - Array of topic names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getTopicsForType = function(topicType, callback, failedCallback) {\n  var topicsForTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/topics_for_type',\n    serviceType : 'rosapi/TopicsForType'\n  });\n\n  var request = new ServiceRequest({\n    type: topicType\n  });\n  if (typeof failedCallback === 'function'){\n    topicsForTypeClient.callService(request,\n      function(result) {\n        callback(result.topics);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicsForTypeClient.callService(request, function(result) {\n      callback(result.topics);\n    });\n  }\n};\n\n/**\n * Retrieve a list of active service names in ROS.\n *\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.services - Array of service names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getServices = function(callback, failedCallback) {\n  var servicesClient = new Service({\n    ros : this,\n    name : '/rosapi/services',\n    serviceType : 'rosapi/Services'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    servicesClient.callService(request,\n      function(result) {\n        callback(result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    servicesClient.callService(request, function(result) {\n      callback(result.services);\n    });\n  }\n};\n\n/**\n * Retrieve a list of services in ROS as an array as specific type.\n *\n * @param {string} serviceType - The service type to find.\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.topics - Array of service names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getServicesForType = function(serviceType, callback, failedCallback) {\n  var servicesForTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/services_for_type',\n    serviceType : 'rosapi/ServicesForType'\n  });\n\n  var request = new ServiceRequest({\n    type: serviceType\n  });\n  if (typeof failedCallback === 'function'){\n    servicesForTypeClient.callService(request,\n      function(result) {\n        callback(result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    servicesForTypeClient.callService(request, function(result) {\n      callback(result.services);\n    });\n  }\n};\n\n/**\n * Retrieve the details of a ROS service request.\n *\n * @param {string} type - The type of the service.\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.result - The result object with the following params:\n * @param {string[]} callback.result.typedefs - An array containing the details of the service request.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getServiceRequestDetails = function(type, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_request_details',\n    serviceType : 'rosapi/ServiceRequestDetails'\n  });\n  var request = new ServiceRequest({\n    type: type\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieve the details of a ROS service response.\n *\n * @param {string} type - The type of the service.\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.result - The result object with the following params:\n * @param {string[]} callback.result.typedefs - An array containing the details of the service response.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getServiceResponseDetails = function(type, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_response_details',\n    serviceType : 'rosapi/ServiceResponseDetails'\n  });\n  var request = new ServiceRequest({\n    type: type\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieve a list of active node names in ROS.\n *\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.nodes - Array of node names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getNodes = function(callback, failedCallback) {\n  var nodesClient = new Service({\n    ros : this,\n    name : '/rosapi/nodes',\n    serviceType : 'rosapi/Nodes'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    nodesClient.callService(request,\n      function(result) {\n        callback(result.nodes);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    nodesClient.callService(request, function(result) {\n      callback(result.nodes);\n    });\n  }\n};\n\n/**\n * Retrieve a list of subscribed topics, publishing topics and services of a specific node.\n * <br>\n * These are the parameters if failedCallback is <strong>defined</strong>.\n *\n * @param {string} node - Name of the node.\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.subscriptions - Array of subscribed topic names.\n * @param {string[]} callback.publications - Array of published topic names.\n * @param {string[]} callback.services - Array of service names hosted.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n *\n * @also\n *\n * Retrieve a list of subscribed topics, publishing topics and services of a specific node.\n * <br>\n * These are the parameters if failedCallback is <strong>undefined</strong>.\n *\n * @param {string} node - Name of the node.\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.result - The result object with the following params:\n * @param {string[]} callback.result.subscribing - Array of subscribed topic names.\n * @param {string[]} callback.result.publishing - Array of published topic names.\n * @param {string[]} callback.result.services - Array of service names hosted.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getNodeDetails = function(node, callback, failedCallback) {\n  var nodesClient = new Service({\n    ros : this,\n    name : '/rosapi/node_details',\n    serviceType : 'rosapi/NodeDetails'\n  });\n\n  var request = new ServiceRequest({\n    node: node\n  });\n  if (typeof failedCallback === 'function'){\n    nodesClient.callService(request,\n      function(result) {\n        callback(result.subscribing, result.publishing, result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  } else {\n    nodesClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieve a list of parameter names from the ROS Parameter Server.\n *\n * @param {function} callback - Function with the following params:\n * @param {string[]} callback.params - Array of param names.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getParams = function(callback, failedCallback) {\n  var paramsClient = new Service({\n    ros : this,\n    name : '/rosapi/get_param_names',\n    serviceType : 'rosapi/GetParamNames'\n  });\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    paramsClient.callService(request,\n      function(result) {\n        callback(result.names);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    paramsClient.callService(request, function(result) {\n      callback(result.names);\n    });\n  }\n};\n\n/**\n * Retrieve the type of a ROS topic.\n *\n * @param {string} topic - Name of the topic.\n * @param {function} callback - Function with the following params:\n * @param {string} callback.type - The type of the topic.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getTopicType = function(topic, callback, failedCallback) {\n  var topicTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/topic_type',\n    serviceType : 'rosapi/TopicType'\n  });\n  var request = new ServiceRequest({\n    topic: topic\n  });\n\n  if (typeof failedCallback === 'function'){\n    topicTypeClient.callService(request,\n      function(result) {\n        callback(result.type);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicTypeClient.callService(request, function(result) {\n      callback(result.type);\n    });\n  }\n};\n\n/**\n * Retrieve the type of a ROS service.\n *\n * @param {string} service - Name of the service.\n * @param {function} callback - Function with the following params:\n * @param {string} callback.type - The type of the service.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getServiceType = function(service, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_type',\n    serviceType : 'rosapi/ServiceType'\n  });\n  var request = new ServiceRequest({\n    service: service\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result.type);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result.type);\n    });\n  }\n};\n\n/**\n * Retrieve the details of a ROS message.\n *\n * @param {string} message - The name of the message type.\n * @param {function} callback - Function with the following params:\n * @param {string} callback.details - An array of the message details.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getMessageDetails = function(message, callback, failedCallback) {\n  var messageDetailClient = new Service({\n    ros : this,\n    name : '/rosapi/message_details',\n    serviceType : 'rosapi/MessageDetails'\n  });\n  var request = new ServiceRequest({\n    type: message\n  });\n\n  if (typeof failedCallback === 'function'){\n    messageDetailClient.callService(request,\n      function(result) {\n        callback(result.typedefs);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    messageDetailClient.callService(request, function(result) {\n      callback(result.typedefs);\n    });\n  }\n};\n\n/**\n * Decode a typedef array into a dictionary like `rosmsg show foo/bar`.\n *\n * @param {Object[]} defs - Array of type_def dictionary.\n */\nRos.prototype.decodeTypeDefs = function(defs) {\n  var that = this;\n\n  var decodeTypeDefsRec = function(theType, hints) {\n    // calls itself recursively to resolve type definition using hints.\n    var typeDefDict = {};\n    for (var i = 0; i < theType.fieldnames.length; i++) {\n      var arrayLen = theType.fieldarraylen[i];\n      var fieldName = theType.fieldnames[i];\n      var fieldType = theType.fieldtypes[i];\n      if (fieldType.indexOf('/') === -1) { // check the fieldType includes '/' or not\n        if (arrayLen === -1) {\n          typeDefDict[fieldName] = fieldType;\n        }\n        else {\n          typeDefDict[fieldName] = [fieldType];\n        }\n      }\n      else {\n        // lookup the name\n        var sub = false;\n        for (var j = 0; j < hints.length; j++) {\n          if (hints[j].type.toString() === fieldType.toString()) {\n            sub = hints[j];\n            break;\n          }\n        }\n        if (sub) {\n          var subResult = decodeTypeDefsRec(sub, hints);\n          if (arrayLen === -1) {\n            typeDefDict[fieldName] = subResult; // add this decoding result to dictionary\n          }\n          else {\n            typeDefDict[fieldName] = [subResult];\n          }\n        }\n        else {\n          that.emit('error', 'Cannot find ' + fieldType + ' in decodeTypeDefs');\n        }\n      }\n    }\n    return typeDefDict;\n  };\n\n  return decodeTypeDefsRec(defs[0], defs);\n};\n\n/**\n * Retrieve a list of topics and their associated type definitions.\n *\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.result - The result object with the following params:\n * @param {string[]} callback.result.topics - Array of topic names.\n * @param {string[]} callback.result.types - Array of message type names.\n * @param {string[]} callback.result.typedefs_full_text - Array of full definitions of message types, similar to `gendeps --cat`.\n * @param {function} [failedCallback] - The callback function when the service call failed with params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nRos.prototype.getTopicsAndRawTypes = function(callback, failedCallback) {\n  var topicsAndRawTypesClient = new Service({\n    ros : this,\n    name : '/rosapi/topics_and_raw_types',\n    serviceType : 'rosapi/TopicsAndRawTypes'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    topicsAndRawTypesClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicsAndRawTypesClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n\nmodule.exports = Ros;\n","/**\n * @fileOverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * Message objects are used for publishing and subscribing to and from topics.\n *\n * @constructor\n * @param {Object} values - An object matching the fields defined in the .msg definition file.\n */\nfunction Message(values) {\n  assign(this, values);\n}\n\nmodule.exports = Message;","/**\n * @fileOverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\nvar Message = require('./Message');\n\n/**\n * Publish and/or subscribe to a topic in ROS.\n *\n * Emits the following events:\n *  * 'warning' - If there are any warning during the Topic creation.\n *  * 'message' - The message data from rosbridge.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.name - The topic name, like '/cmd_vel'.\n * @param {string} options.messageType - The message type, like 'std_msgs/String'.\n * @param {string} [options.compression=none] - The type of compression to use, like 'png', 'cbor', or 'cbor-raw'.\n * @param {number} [options.throttle_rate=0] - The rate (in ms in between messages) at which to throttle the topics.\n * @param {number} [options.queue_size=100] - The queue created at bridge side for re-publishing webtopics.\n * @param {boolean} [options.latch=false] - Latch the topic when publishing.\n * @param {number} [options.queue_length=0] - The queue length at bridge side used when subscribing.\n * @param {boolean} [options.reconnect_on_close=true] - The flag to enable resubscription and readvertisement on close event.\n */\nfunction Topic(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n  this.messageType = options.messageType;\n  this.isAdvertised = false;\n  this.compression = options.compression || 'none';\n  this.throttle_rate = options.throttle_rate || 0;\n  this.latch = options.latch || false;\n  this.queue_size = options.queue_size || 100;\n  this.queue_length = options.queue_length || 0;\n  this.reconnect_on_close = options.reconnect_on_close !== undefined ? options.reconnect_on_close : true;\n\n  // Check for valid compression types\n  if (this.compression && this.compression !== 'png' &&\n    this.compression !== 'cbor' && this.compression !== 'cbor-raw' &&\n    this.compression !== 'none') {\n    this.emit('warning', this.compression +\n      ' compression is not supported. No compression will be used.');\n    this.compression = 'none';\n  }\n\n  // Check if throttle rate is negative\n  if (this.throttle_rate < 0) {\n    this.emit('warning', this.throttle_rate + ' is not allowed. Set to 0');\n    this.throttle_rate = 0;\n  }\n\n  var that = this;\n  if (this.reconnect_on_close) {\n    this.callForSubscribeAndAdvertise = function(message) {\n      that.ros.callOnConnection(message);\n\n      that.waitForReconnect = false;\n      that.reconnectFunc = function() {\n        if(!that.waitForReconnect) {\n          that.waitForReconnect = true;\n          that.ros.callOnConnection(message);\n          that.ros.once('connection', function() {\n            that.waitForReconnect = false;\n          });\n        }\n      };\n      that.ros.on('close', that.reconnectFunc);\n    };\n  }\n  else {\n    this.callForSubscribeAndAdvertise = this.ros.callOnConnection;\n  }\n\n  this._messageCallback = function(data) {\n    that.emit('message', new Message(data));\n  };\n}\nTopic.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Every time a message is published for the given topic, the callback\n * will be called with the message object.\n *\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.message - The published message.\n */\nTopic.prototype.subscribe = function(callback) {\n  if (typeof callback === 'function') {\n    this.on('message', callback);\n  }\n\n  if (this.subscribeId) { return; }\n  this.ros.on(this.name, this._messageCallback);\n  this.subscribeId = 'subscribe:' + this.name + ':' + (++this.ros.idCounter);\n\n  this.callForSubscribeAndAdvertise({\n    op: 'subscribe',\n    id: this.subscribeId,\n    type: this.messageType,\n    topic: this.name,\n    compression: this.compression,\n    throttle_rate: this.throttle_rate,\n    queue_length: this.queue_length\n  });\n};\n\n/**\n * Unregister as a subscriber for the topic. Unsubscribing will stop\n * and remove all subscribe callbacks. To remove a callback, you must\n * explicitly pass the callback function in.\n *\n * @param {function} [callback] - The callback to unregister, if\n *     provided and other listeners are registered the topic won't\n *     unsubscribe, just stop emitting to the passed listener.\n */\nTopic.prototype.unsubscribe = function(callback) {\n  if (callback) {\n    this.off('message', callback);\n    // If there is any other callbacks still subscribed don't unsubscribe\n    if (this.listeners('message').length) { return; }\n  }\n  if (!this.subscribeId) { return; }\n  // Note: Don't call this.removeAllListeners, allow client to handle that themselves\n  this.ros.off(this.name, this._messageCallback);\n  if(this.reconnect_on_close) {\n    this.ros.off('close', this.reconnectFunc);\n  }\n  this.emit('unsubscribe');\n  this.ros.callOnConnection({\n    op: 'unsubscribe',\n    id: this.subscribeId,\n    topic: this.name\n  });\n  this.subscribeId = null;\n};\n\n\n/**\n * Register as a publisher for the topic.\n */\nTopic.prototype.advertise = function() {\n  if (this.isAdvertised) {\n    return;\n  }\n  this.advertiseId = 'advertise:' + this.name + ':' + (++this.ros.idCounter);\n  this.callForSubscribeAndAdvertise({\n    op: 'advertise',\n    id: this.advertiseId,\n    type: this.messageType,\n    topic: this.name,\n    latch: this.latch,\n    queue_size: this.queue_size\n  });\n  this.isAdvertised = true;\n\n  if(!this.reconnect_on_close) {\n    var that = this;\n    this.ros.on('close', function() {\n      that.isAdvertised = false;\n    });\n  }\n};\n\n/**\n * Unregister as a publisher for the topic.\n */\nTopic.prototype.unadvertise = function() {\n  if (!this.isAdvertised) {\n    return;\n  }\n  if(this.reconnect_on_close) {\n    this.ros.off('close', this.reconnectFunc);\n  }\n  this.emit('unadvertise');\n  this.ros.callOnConnection({\n    op: 'unadvertise',\n    id: this.advertiseId,\n    topic: this.name\n  });\n  this.isAdvertised = false;\n};\n\n/**\n * Publish the message.\n *\n * @param {Message} message - A ROSLIB.Message object.\n */\nTopic.prototype.publish = function(message) {\n  if (!this.isAdvertised) {\n    this.advertise();\n  }\n\n  this.ros.idCounter++;\n  var call = {\n    op: 'publish',\n    id: 'publish:' + this.name + ':' + this.ros.idCounter,\n    topic: this.name,\n    msg: message,\n    latch: this.latch\n  };\n  this.ros.callOnConnection(call);\n};\n\nmodule.exports = Topic;\n","/**\n * @fileOverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar Service = require('./Service');\nvar ServiceRequest = require('./ServiceRequest');\n\n/**\n * A ROS parameter.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.name - The param name, like max_vel_x.\n */\nfunction Param(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n}\n\n/**\n * Fetch the value of the param.\n *\n * @param {function} callback - Function with the following params:\n * @param {Object} callback.value - The value of the param from ROS.\n * @param {function} [failedCallback] - Function when the service call failed with the following params:\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nParam.prototype.get = function(callback, failedCallback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/get_param',\n    serviceType : 'rosapi/GetParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name\n  });\n\n  paramClient.callService(request, function(result) {\n    var value = JSON.parse(result.value);\n    callback(value);\n  }, failedCallback);\n};\n\n/**\n * Set the value of the param in ROS.\n *\n * @param {Object} value - The value to set param to.\n * @param {function} [callback] - The callback function.\n * @param {function} [failedCallback] - The callback function when the service call failed.\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nParam.prototype.set = function(value, callback, failedCallback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/set_param',\n    serviceType : 'rosapi/SetParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name,\n    value : JSON.stringify(value)\n  });\n\n  paramClient.callService(request, callback, failedCallback);\n};\n\n/**\n * Delete this parameter on the ROS server.\n *\n * @param {function} [callback] - The callback function when the service call succeeded.\n * @param {function} [failedCallback] - The callback function when the service call failed.\n * @param {string} failedCallback.error - The error message reported by ROS.\n */\nParam.prototype.delete = function(callback, failedCallback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/delete_param',\n    serviceType : 'rosapi/DeleteParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name\n  });\n\n  paramClient.callService(request, callback, failedCallback);\n};\n\nmodule.exports = Param;\n","var mixin = require('../mixin');\n\nvar core = module.exports = {\n    Ros: require('./Ros'),\n    Topic: require('./Topic'),\n    Message: require('./Message'),\n    Param: require('./Param'),\n    Service: require('./Service'),\n    ServiceRequest: require('./ServiceRequest'),\n    ServiceResponse: require('./ServiceResponse')\n};\n\nmixin(core.Ros, ['Param', 'Service', 'Topic'], core);\n","/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action client.\n *\n * Emits the following events:\n *  * 'timeout' - If a timeout occurred while sending a goal.\n *  * 'status' - The status messages received from the action server.\n *  * 'feedback' - The feedback messages received from the action server.\n *  * 'result' - The result returned from the action server.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.serverName - The action server name, like '/fibonacci'.\n * @param {string} options.actionName - The action message name, like 'actionlib_tutorials/FibonacciAction'.\n * @param {number} [options.timeout] - The timeout length when connecting to the action server.\n * @param {boolean} [options.omitFeedback] - The flag to indicate whether to omit the feedback channel or not.\n * @param {boolean} [options.omitStatus] - The flag to indicate whether to omit the status channel or not.\n * @param {boolean} [options.omitResult] - The flag to indicate whether to omit the result channel or not.\n */\nfunction ActionClient(options) {\n  var that = this;\n  options = options || {};\n  this.ros = options.ros;\n  this.serverName = options.serverName;\n  this.actionName = options.actionName;\n  this.timeout = options.timeout;\n  this.omitFeedback = options.omitFeedback;\n  this.omitStatus = options.omitStatus;\n  this.omitResult = options.omitResult;\n  this.goals = {};\n\n  // flag to check if a status has been received\n  var receivedStatus = false;\n\n  // create the topics associated with actionlib\n  this.feedbackListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/feedback',\n    messageType : this.actionName + 'Feedback'\n  });\n\n  this.statusListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/status',\n    messageType : 'actionlib_msgs/GoalStatusArray'\n  });\n\n  this.resultListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/result',\n    messageType : this.actionName + 'Result'\n  });\n\n  this.goalTopic = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/goal',\n    messageType : this.actionName + 'Goal'\n  });\n\n  this.cancelTopic = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/cancel',\n    messageType : 'actionlib_msgs/GoalID'\n  });\n\n  // advertise the goal and cancel topics\n  this.goalTopic.advertise();\n  this.cancelTopic.advertise();\n\n  // subscribe to the status topic\n  if (!this.omitStatus) {\n    this.statusListener.subscribe(function(statusMessage) {\n      receivedStatus = true;\n      statusMessage.status_list.forEach(function(status) {\n        var goal = that.goals[status.goal_id.id];\n        if (goal) {\n          goal.emit('status', status);\n        }\n      });\n    });\n  }\n\n  // subscribe the the feedback topic\n  if (!this.omitFeedback) {\n    this.feedbackListener.subscribe(function(feedbackMessage) {\n      var goal = that.goals[feedbackMessage.status.goal_id.id];\n      if (goal) {\n        goal.emit('status', feedbackMessage.status);\n        goal.emit('feedback', feedbackMessage.feedback);\n      }\n    });\n  }\n\n  // subscribe to the result topic\n  if (!this.omitResult) {\n    this.resultListener.subscribe(function(resultMessage) {\n      var goal = that.goals[resultMessage.status.goal_id.id];\n\n      if (goal) {\n        goal.emit('status', resultMessage.status);\n        goal.emit('result', resultMessage.result);\n      }\n    });\n  }\n\n  // If timeout specified, emit a 'timeout' event if the action server does not respond\n  if (this.timeout) {\n    setTimeout(function() {\n      if (!receivedStatus) {\n        that.emit('timeout');\n      }\n    }, this.timeout);\n  }\n}\n\nActionClient.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Cancel all goals associated with this ActionClient.\n */\nActionClient.prototype.cancel = function() {\n  var cancelMessage = new Message();\n  this.cancelTopic.publish(cancelMessage);\n};\n\n/**\n * Unsubscribe and unadvertise all topics associated with this ActionClient.\n */\nActionClient.prototype.dispose = function() {\n  this.goalTopic.unadvertise();\n  this.cancelTopic.unadvertise();\n  if (!this.omitStatus) {this.statusListener.unsubscribe();}\n  if (!this.omitFeedback) {this.feedbackListener.unsubscribe();}\n  if (!this.omitResult) {this.resultListener.unsubscribe();}\n};\n\nmodule.exports = ActionClient;\n","/**\n * @fileOverview\n * @author Justin Young - justin@oodar.com.au\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action listener.\n *\n * Emits the following events:\n *  * 'status' - The status messages received from the action server.\n *  * 'feedback' - The feedback messages received from the action server.\n *  * 'result' - The result returned from the action server.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.serverName - The action server name, like '/fibonacci'.\n * @param {string} options.actionName - The action message name, like 'actionlib_tutorials/FibonacciAction'.\n */\nfunction ActionListener(options) {\n  var that = this;\n  options = options || {};\n  this.ros = options.ros;\n  this.serverName = options.serverName;\n  this.actionName = options.actionName;\n\n\n  // create the topics associated with actionlib\n  var goalListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/goal',\n    messageType : this.actionName + 'Goal'\n  });\n\n  var feedbackListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/feedback',\n    messageType : this.actionName + 'Feedback'\n  });\n\n  var statusListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/status',\n    messageType : 'actionlib_msgs/GoalStatusArray'\n  });\n\n  var resultListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/result',\n    messageType : this.actionName + 'Result'\n  });\n\n  goalListener.subscribe(function(goalMessage) {\n      that.emit('goal', goalMessage);\n  });\n\n  statusListener.subscribe(function(statusMessage) {\n      statusMessage.status_list.forEach(function(status) {\n          that.emit('status', status);\n      });\n  });\n\n  feedbackListener.subscribe(function(feedbackMessage) {\n      that.emit('status', feedbackMessage.status);\n      that.emit('feedback', feedbackMessage.feedback);\n  });\n\n  // subscribe to the result topic\n  resultListener.subscribe(function(resultMessage) {\n      that.emit('status', resultMessage.status);\n      that.emit('result', resultMessage.result);\n  });\n\n}\n\nActionListener.prototype.__proto__ = EventEmitter2.prototype;\n\nmodule.exports = ActionListener;\n","/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib goal that is associated with an action server.\n *\n * Emits the following events:\n *  * 'timeout' - If a timeout occurred while sending a goal.\n *\n * @constructor\n * @param {Object} options\n * @param {ActionClient} options.actionClient - The ROSLIB.ActionClient to use with this goal.\n * @param {Object} options.goalMessage - The JSON object containing the goal for the action server.\n */\nfunction Goal(options) {\n  var that = this;\n  this.actionClient = options.actionClient;\n  this.goalMessage = options.goalMessage;\n  this.isFinished = false;\n\n  // Used to create random IDs\n  var date = new Date();\n\n  // Create a random ID\n  this.goalID = 'goal_' + Math.random() + '_' + date.getTime();\n  // Fill in the goal message\n  this.goalMessage = new Message({\n    goal_id : {\n      stamp : {\n        secs : 0,\n        nsecs : 0\n      },\n      id : this.goalID\n    },\n    goal : this.goalMessage\n  });\n\n  this.on('status', function(status) {\n    that.status = status;\n  });\n\n  this.on('result', function(result) {\n    that.isFinished = true;\n    that.result = result;\n  });\n\n  this.on('feedback', function(feedback) {\n    that.feedback = feedback;\n  });\n\n  // Add the goal\n  this.actionClient.goals[this.goalID] = this;\n}\n\nGoal.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Send the goal to the action server.\n *\n * @param {number} [timeout] - A timeout length for the goal's result.\n */\nGoal.prototype.send = function(timeout) {\n  var that = this;\n  that.actionClient.goalTopic.publish(that.goalMessage);\n  if (timeout) {\n    setTimeout(function() {\n      if (!that.isFinished) {\n        that.emit('timeout');\n      }\n    }, timeout);\n  }\n};\n\n/**\n * Cancel the current goal.\n */\nGoal.prototype.cancel = function() {\n  var cancelMessage = new Message({\n    id : this.goalID\n  });\n  this.actionClient.cancelTopic.publish(cancelMessage);\n};\n\nmodule.exports = Goal;\n","/**\n * @fileOverview\n * @author Laura Lindzey - lindzey@gmail.com\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action server client.\n *\n * Emits the following events:\n *  * 'goal' - Goal sent by action client.\n *  * 'cancel' - Action client has canceled the request.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} options.serverName - The action server name, like '/fibonacci'.\n * @param {string} options.actionName - The action message name, like 'actionlib_tutorials/FibonacciAction'.\n */\nfunction SimpleActionServer(options) {\n    var that = this;\n    options = options || {};\n    this.ros = options.ros;\n    this.serverName = options.serverName;\n    this.actionName = options.actionName;\n\n    // create and advertise publishers\n    this.feedbackPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/feedback',\n        messageType : this.actionName + 'Feedback'\n    });\n    this.feedbackPublisher.advertise();\n\n    var statusPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/status',\n        messageType : 'actionlib_msgs/GoalStatusArray'\n    });\n    statusPublisher.advertise();\n\n    this.resultPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/result',\n        messageType : this.actionName + 'Result'\n    });\n    this.resultPublisher.advertise();\n\n    // create and subscribe to listeners\n    var goalListener = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/goal',\n        messageType : this.actionName + 'Goal'\n    });\n\n    var cancelListener = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/cancel',\n        messageType : 'actionlib_msgs/GoalID'\n    });\n\n    // Track the goals and their status in order to publish status...\n    this.statusMessage = new Message({\n        header : {\n            stamp : {secs : 0, nsecs : 100},\n            frame_id : ''\n        },\n        status_list : []\n    });\n\n    // needed for handling preemption prompted by a new goal being received\n    this.currentGoal = null; // currently tracked goal\n    this.nextGoal = null; // the one that'll be preempting\n\n    goalListener.subscribe(function(goalMessage) {\n\n    if(that.currentGoal) {\n            that.nextGoal = goalMessage;\n            // needs to happen AFTER rest is set up\n            that.emit('cancel');\n    } else {\n            that.statusMessage.status_list = [{goal_id : goalMessage.goal_id, status : 1}];\n            that.currentGoal = goalMessage;\n            that.emit('goal', goalMessage.goal);\n    }\n    });\n\n    // helper function to determine ordering of timestamps\n    // returns t1 < t2\n    var isEarlier = function(t1, t2) {\n        if(t1.secs > t2.secs) {\n            return false;\n        } else if(t1.secs < t2.secs) {\n            return true;\n        } else if(t1.nsecs < t2.nsecs) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    // TODO: this may be more complicated than necessary, since I'm\n    // not sure if the callbacks can ever wind up with a scenario\n    // where we've been preempted by a next goal, it hasn't finished\n    // processing, and then we get a cancel message\n    cancelListener.subscribe(function(cancelMessage) {\n\n        // cancel ALL goals if both empty\n        if(cancelMessage.stamp.secs === 0 && cancelMessage.stamp.secs === 0 && cancelMessage.id === '') {\n            that.nextGoal = null;\n            if(that.currentGoal) {\n                that.emit('cancel');\n            }\n        } else { // treat id and stamp independently\n            if(that.currentGoal && cancelMessage.id === that.currentGoal.goal_id.id) {\n                that.emit('cancel');\n            } else if(that.nextGoal && cancelMessage.id === that.nextGoal.goal_id.id) {\n                that.nextGoal = null;\n            }\n\n            if(that.nextGoal && isEarlier(that.nextGoal.goal_id.stamp,\n                                          cancelMessage.stamp)) {\n                that.nextGoal = null;\n            }\n            if(that.currentGoal && isEarlier(that.currentGoal.goal_id.stamp,\n                                             cancelMessage.stamp)) {\n                that.emit('cancel');\n            }\n        }\n    });\n\n    // publish status at pseudo-fixed rate; required for clients to know they've connected\n    var statusInterval = setInterval( function() {\n        var currentTime = new Date();\n        var secs = Math.floor(currentTime.getTime()/1000);\n        var nsecs = Math.round(1000000000*(currentTime.getTime()/1000-secs));\n        that.statusMessage.header.stamp.secs = secs;\n        that.statusMessage.header.stamp.nsecs = nsecs;\n        statusPublisher.publish(that.statusMessage);\n    }, 500); // publish every 500ms\n\n}\n\nSimpleActionServer.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Set action state to succeeded and return to client.\n *\n * @param {Object} result - The result to return to the client.\n */\nSimpleActionServer.prototype.setSucceeded = function(result) {\n    var resultMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 3},\n        result : result\n    });\n    this.resultPublisher.publish(resultMessage);\n\n    this.statusMessage.status_list = [];\n    if(this.nextGoal) {\n        this.currentGoal = this.nextGoal;\n        this.nextGoal = null;\n        this.emit('goal', this.currentGoal.goal);\n    } else {\n        this.currentGoal = null;\n    }\n};\n\n/**\n * Set action state to aborted and return to client.\n *\n * @param {Object} result - The result to return to the client.\n */\nSimpleActionServer.prototype.setAborted = function(result) {\n    var resultMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 4},\n        result : result\n    });\n    this.resultPublisher.publish(resultMessage);\n\n    this.statusMessage.status_list = [];\n    if(this.nextGoal) {\n        this.currentGoal = this.nextGoal;\n        this.nextGoal = null;\n        this.emit('goal', this.currentGoal.goal);\n    } else {\n        this.currentGoal = null;\n    }\n};\n\n/**\n * Send a feedback message.\n *\n * @param {Object} feedback - The feedback to send to the client.\n */\nSimpleActionServer.prototype.sendFeedback = function(feedback) {\n    var feedbackMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 1},\n        feedback : feedback\n    });\n    this.feedbackPublisher.publish(feedbackMessage);\n};\n\n/**\n * Handle case where client requests preemption.\n */\nSimpleActionServer.prototype.setPreempted = function() {\n    this.statusMessage.status_list = [];\n    var resultMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 2},\n    });\n    this.resultPublisher.publish(resultMessage);\n\n    if(this.nextGoal) {\n        this.currentGoal = this.nextGoal;\n        this.nextGoal = null;\n        this.emit('goal', this.currentGoal.goal);\n    } else {\n        this.currentGoal = null;\n    }\n};\n\nmodule.exports = SimpleActionServer;\n","var Ros = require('../core/Ros');\nvar mixin = require('../mixin');\n\nvar action = module.exports = {\n    ActionClient: require('./ActionClient'),\n    ActionListener: require('./ActionListener'),\n    Goal: require('./Goal'),\n    SimpleActionServer: require('./SimpleActionServer')\n};\n\nmixin(Ros, ['ActionClient', 'SimpleActionServer'], action);\n","/**\n * @fileOverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\n/**\n * A 3D vector.\n *\n * @constructor\n * @param {Object} options\n * @param {number} [options.x=0] - The x value.\n * @param {number} [options.y=0] - The y value.\n * @param {number} [options.z=0] - The z value.\n */\nfunction Vector3(options) {\n  options = options || {};\n  this.x = options.x || 0;\n  this.y = options.y || 0;\n  this.z = options.z || 0;\n}\n\n/**\n * Set the values of this vector to the sum of itself and the given vector.\n *\n * @param {Vector3} v - The vector to add with.\n */\nVector3.prototype.add = function(v) {\n  this.x += v.x;\n  this.y += v.y;\n  this.z += v.z;\n};\n\n/**\n * Set the values of this vector to the difference of itself and the given vector.\n *\n * @param {Vector3} v - The vector to subtract with.\n */\nVector3.prototype.subtract = function(v) {\n  this.x -= v.x;\n  this.y -= v.y;\n  this.z -= v.z;\n};\n\n/**\n * Multiply the given Quaternion with this vector.\n *\n * @param {Quaternion} q - The quaternion to multiply with.\n */\nVector3.prototype.multiplyQuaternion = function(q) {\n  var ix = q.w * this.x + q.y * this.z - q.z * this.y;\n  var iy = q.w * this.y + q.z * this.x - q.x * this.z;\n  var iz = q.w * this.z + q.x * this.y - q.y * this.x;\n  var iw = -q.x * this.x - q.y * this.y - q.z * this.z;\n  this.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  this.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  this.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n};\n\n/**\n * Clone a copy of this vector.\n *\n * @returns {Vector3} The cloned vector.\n */\nVector3.prototype.clone = function() {\n  return new Vector3(this);\n};\n\nmodule.exports = Vector3;\n","/**\n * @fileOverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\n/**\n * A Quaternion.\n *\n * @constructor\n * @param {Object} options\n * @param {number} [options.x=0] - The x value.\n * @param {number} [options.y=0] - The y value.\n * @param {number} [options.z=0] - The z value.\n * @param {number} [options.w=1] - The w value.\n */\nfunction Quaternion(options) {\n  options = options || {};\n  this.x = options.x || 0;\n  this.y = options.y || 0;\n  this.z = options.z || 0;\n  this.w = (typeof options.w === 'number') ? options.w : 1;\n}\n\n/**\n * Perform a conjugation on this quaternion.\n */\nQuaternion.prototype.conjugate = function() {\n  this.x *= -1;\n  this.y *= -1;\n  this.z *= -1;\n};\n\n/**\n * Return the norm of this quaternion.\n */\nQuaternion.prototype.norm = function() {\n  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n};\n\n/**\n * Perform a normalization on this quaternion.\n */\nQuaternion.prototype.normalize = function() {\n  var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  if (l === 0) {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.w = 1;\n  } else {\n    l = 1 / l;\n    this.x = this.x * l;\n    this.y = this.y * l;\n    this.z = this.z * l;\n    this.w = this.w * l;\n  }\n};\n\n/**\n * Convert this quaternion into its inverse.\n */\nQuaternion.prototype.invert = function() {\n  this.conjugate();\n  this.normalize();\n};\n\n/**\n * Set the values of this quaternion to the product of itself and the given quaternion.\n *\n * @param {Quaternion} q - The quaternion to multiply with.\n */\nQuaternion.prototype.multiply = function(q) {\n  var newX = this.x * q.w + this.y * q.z - this.z * q.y + this.w * q.x;\n  var newY = -this.x * q.z + this.y * q.w + this.z * q.x + this.w * q.y;\n  var newZ = this.x * q.y - this.y * q.x + this.z * q.w + this.w * q.z;\n  var newW = -this.x * q.x - this.y * q.y - this.z * q.z + this.w * q.w;\n  this.x = newX;\n  this.y = newY;\n  this.z = newZ;\n  this.w = newW;\n};\n\n/**\n * Clone a copy of this quaternion.\n *\n * @returns {Quaternion} The cloned quaternion.\n */\nQuaternion.prototype.clone = function() {\n  return new Quaternion(this);\n};\n\nmodule.exports = Quaternion;\n","/**\n * @fileOverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar Vector3 = require('./Vector3');\nvar Quaternion = require('./Quaternion');\n\n/**\n * A Pose in 3D space. Values are copied into this object.\n *\n * @constructor\n * @param {Object} options\n * @param {Vector3} options.position - The ROSLIB.Vector3 describing the position.\n * @param {Quaternion} options.orientation - The ROSLIB.Quaternion describing the orientation.\n */\nfunction Pose(options) {\n  options = options || {};\n  // copy the values into this object if they exist\n  this.position = new Vector3(options.position);\n  this.orientation = new Quaternion(options.orientation);\n}\n\n/**\n * Apply a transform against this pose.\n *\n * @param {Transform} tf - The transform to be applied.\n */\nPose.prototype.applyTransform = function(tf) {\n  this.position.multiplyQuaternion(tf.rotation);\n  this.position.add(tf.translation);\n  var tmp = tf.rotation.clone();\n  tmp.multiply(this.orientation);\n  this.orientation = tmp;\n};\n\n/**\n * Clone a copy of this pose.\n *\n * @returns {Pose} The cloned pose.\n */\nPose.prototype.clone = function() {\n  return new Pose(this);\n};\n\n/**\n * Multiply this pose with another pose without altering this pose.\n *\n * @returns {Pose} The result of the multiplication.\n */\nPose.prototype.multiply = function(pose) {\n  var p = pose.clone();\n  p.applyTransform({ rotation: this.orientation, translation: this.position });\n  return p;\n};\n\n/**\n * Compute the inverse of this pose.\n *\n * @returns {Pose} The inverse of the pose.\n */\nPose.prototype.getInverse = function() {\n  var inverse = this.clone();\n  inverse.orientation.invert();\n  inverse.position.multiplyQuaternion(inverse.orientation);\n  inverse.position.x *= -1;\n  inverse.position.y *= -1;\n  inverse.position.z *= -1;\n  return inverse;\n};\n\nmodule.exports = Pose;\n","/**\n * @fileOverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar Vector3 = require('./Vector3');\nvar Quaternion = require('./Quaternion');\n\n/**\n * A Transform in 3-space. Values are copied into this object.\n *\n * @constructor\n * @param {Object} options\n * @param {Vector3} options.translation - The ROSLIB.Vector3 describing the translation.\n * @param {Quaternion} options.rotation - The ROSLIB.Quaternion describing the rotation.\n */\nfunction Transform(options) {\n  options = options || {};\n  // Copy the values into this object if they exist\n  this.translation = new Vector3(options.translation);\n  this.rotation = new Quaternion(options.rotation);\n}\n\n/**\n * Clone a copy of this transform.\n *\n * @returns {Transform} The cloned transform.\n */\nTransform.prototype.clone = function() {\n  return new Transform(this);\n};\n\nmodule.exports = Transform;\n","module.exports = {\n    Pose: require('./Pose'),\n    Quaternion: require('./Quaternion'),\n    Transform: require('./Transform'),\n    Vector3: require('./Vector3')\n};\n","/**\n * @fileOverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar ActionClient = require('../actionlib/ActionClient');\nvar Goal = require('../actionlib/Goal');\n\nvar Service = require('../core/Service.js');\nvar ServiceRequest = require('../core/ServiceRequest.js');\nvar Topic = require('../core/Topic.js');\n\nvar Transform = require('../math/Transform');\n\n/**\n * A TF Client that listens to TFs from tf2_web_republisher.\n *\n * @constructor\n * @param {Object} options\n * @param {Ros} options.ros - The ROSLIB.Ros connection handle.\n * @param {string} [options.fixedFrame=base_link] - The fixed frame.\n * @param {number} [options.angularThres=2.0] - The angular threshold for the TF republisher.\n * @param {number} [options.transThres=0.01] - The translation threshold for the TF republisher.\n * @param {number} [options.rate=10.0] - The rate for the TF republisher.\n * @param {number} [options.updateDelay=50] - The time (in ms) to wait after a new subscription\n *     to update the TF republisher's list of TFs.\n * @param {number} [options.topicTimeout=2.0] - The timeout parameter for the TF republisher.\n * @param {string} [options.serverName=/tf2_web_republisher] - The name of the tf2_web_republisher server.\n * @param {string} [options.repubServiceName=/republish_tfs] - The name of the republish_tfs service (non groovy compatibility mode only).\n */\nfunction TFClient(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.fixedFrame = options.fixedFrame || 'base_link';\n  this.angularThres = options.angularThres || 2.0;\n  this.transThres = options.transThres || 0.01;\n  this.rate = options.rate || 10.0;\n  this.updateDelay = options.updateDelay || 50;\n  var seconds = options.topicTimeout || 2.0;\n  var secs = Math.floor(seconds);\n  var nsecs = Math.floor((seconds - secs) * 1000000000);\n  this.topicTimeout = {\n    secs: secs,\n    nsecs: nsecs\n  };\n  this.serverName = options.serverName || '/tf2_web_republisher';\n  this.repubServiceName = options.repubServiceName || '/republish_tfs';\n\n  this.currentGoal = false;\n  this.currentTopic = false;\n  this.frameInfos = {};\n  this.republisherUpdateRequested = false;\n  this._subscribeCB = null;\n  this._isDisposed = false;\n\n  // Create an Action Client\n  this.actionClient = new ActionClient({\n    ros : options.ros,\n    serverName : this.serverName,\n    actionName : 'tf2_web_republisher/TFSubscriptionAction',\n    omitStatus : true,\n    omitResult : true\n  });\n\n  // Create a Service Client\n  this.serviceClient = new Service({\n    ros: options.ros,\n    name: this.repubServiceName,\n    serviceType: 'tf2_web_republisher/RepublishTFs'\n  });\n}\n\n/**\n * Process the incoming TF message and send them out using the callback\n * functions.\n *\n * @param {Object} tf - The TF message from the server.\n */\nTFClient.prototype.processTFArray = function(tf) {\n  var that = this;\n  tf.transforms.forEach(function(transform) {\n    var frameID = transform.child_frame_id;\n    if (frameID[0] === '/')\n    {\n      frameID = frameID.substring(1);\n    }\n    var info = this.frameInfos[frameID];\n    if (info) {\n      info.transform = new Transform({\n        translation : transform.transform.translation,\n        rotation : transform.transform.rotation\n      });\n      info.cbs.forEach(function(cb) {\n        cb(info.transform);\n      });\n    }\n  }, this);\n};\n\n/**\n * Create and send a new goal (or service request) to the tf2_web_republisher\n * based on the current list of TFs.\n */\nTFClient.prototype.updateGoal = function() {\n  var goalMessage = {\n    source_frames : Object.keys(this.frameInfos),\n    target_frame : this.fixedFrame,\n    angular_thres : this.angularThres,\n    trans_thres : this.transThres,\n    rate : this.rate\n  };\n\n  // if we're running in groovy compatibility mode (the default)\n  // then use the action interface to tf2_web_republisher\n  if(this.ros.groovyCompatibility) {\n    if (this.currentGoal) {\n      this.currentGoal.cancel();\n    }\n    this.currentGoal = new Goal({\n      actionClient : this.actionClient,\n      goalMessage : goalMessage\n    });\n\n    this.currentGoal.on('feedback', this.processTFArray.bind(this));\n    this.currentGoal.send();\n  }\n  else {\n    // otherwise, use the service interface\n    // The service interface has the same parameters as the action,\n    // plus the timeout\n    goalMessage.timeout = this.topicTimeout;\n    var request = new ServiceRequest(goalMessage);\n\n    this.serviceClient.callService(request, this.processResponse.bind(this));\n  }\n\n  this.republisherUpdateRequested = false;\n};\n\n/**\n * Process the service response and subscribe to the tf republisher\n * topic.\n *\n * @param {Object} response - The service response containing the topic name.\n */\nTFClient.prototype.processResponse = function(response) {\n  // Do not setup a topic subscription if already disposed. Prevents a race condition where\n  // The dispose() function is called before the service call receives a response.\n  if (this._isDisposed) {\n    return;\n  }\n\n  // if we subscribed to a topic before, unsubscribe so\n  // the republisher stops publishing it\n  if (this.currentTopic) {\n    this.currentTopic.unsubscribe(this._subscribeCB);\n  }\n\n  this.currentTopic = new Topic({\n    ros: this.ros,\n    name: response.topic_name,\n    messageType: 'tf2_web_republisher/TFArray'\n  });\n  this._subscribeCB = this.processTFArray.bind(this);\n  this.currentTopic.subscribe(this._subscribeCB);\n};\n\n/**\n * Subscribe to the given TF frame.\n *\n * @param {string} frameID - The TF frame to subscribe to.\n * @param {function} callback - Function with the following params:\n * @param {Transform} callback.transform - The transform data.\n */\nTFClient.prototype.subscribe = function(frameID, callback) {\n  // remove leading slash, if it's there\n  if (frameID[0] === '/')\n  {\n    frameID = frameID.substring(1);\n  }\n  // if there is no callback registered for the given frame, create empty callback list\n  if (!this.frameInfos[frameID]) {\n    this.frameInfos[frameID] = {\n      cbs: []\n    };\n    if (!this.republisherUpdateRequested) {\n      setTimeout(this.updateGoal.bind(this), this.updateDelay);\n      this.republisherUpdateRequested = true;\n    }\n  }\n  // if we already have a transform, callback immediately\n  else if (this.frameInfos[frameID].transform) {\n    callback(this.frameInfos[frameID].transform);\n  }\n  this.frameInfos[frameID].cbs.push(callback);\n};\n\n/**\n * Unsubscribe from the given TF frame.\n *\n * @param {string} frameID - The TF frame to unsubscribe from.\n * @param {function} callback - The callback function to remove.\n */\nTFClient.prototype.unsubscribe = function(frameID, callback) {\n  // remove leading slash, if it's there\n  if (frameID[0] === '/')\n  {\n    frameID = frameID.substring(1);\n  }\n  var info = this.frameInfos[frameID];\n  for (var cbs = info && info.cbs || [], idx = cbs.length; idx--;) {\n    if (cbs[idx] === callback) {\n      cbs.splice(idx, 1);\n    }\n  }\n  if (!callback || cbs.length === 0) {\n    delete this.frameInfos[frameID];\n  }\n};\n\n/**\n * Unsubscribe and unadvertise all topics associated with this TFClient.\n */\nTFClient.prototype.dispose = function() {\n  this._isDisposed = true;\n  this.actionClient.dispose();\n  if (this.currentTopic) {\n    this.currentTopic.unsubscribe(this._subscribeCB);\n  }\n};\n\nmodule.exports = TFClient;\n","var Ros = require('../core/Ros');\nvar mixin = require('../mixin');\n\nvar tf = module.exports = {\n    TFClient: require('./TFClient')\n};\n\nmixin(Ros, ['TFClient'], tf);","module.exports = {\n\tURDF_SPHERE : 0,\n\tURDF_BOX : 1,\n\tURDF_CYLINDER : 2,\n\tURDF_MESH : 3\n};\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Vector3 = require('../math/Vector3');\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Box element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfBox(options) {\n  this.dimension = null;\n  this.type = UrdfTypes.URDF_BOX;\n\n  // Parse the xml string\n  var xyz = options.xml.getAttribute('size').split(' ');\n  this.dimension = new Vector3({\n    x : parseFloat(xyz[0]),\n    y : parseFloat(xyz[1]),\n    z : parseFloat(xyz[2])\n  });\n}\n\nmodule.exports = UrdfBox;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\n/**\n * A Color element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfColor(options) {\n  // Parse the xml string\n  var rgba = options.xml.getAttribute('rgba').split(' ');\n  this.r = parseFloat(rgba[0]);\n  this.g = parseFloat(rgba[1]);\n  this.b = parseFloat(rgba[2]);\n  this.a = parseFloat(rgba[3]);\n}\n\nmodule.exports = UrdfColor;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Cylinder element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfCylinder(options) {\n  this.type = UrdfTypes.URDF_CYLINDER;\n  this.length = parseFloat(options.xml.getAttribute('length'));\n  this.radius = parseFloat(options.xml.getAttribute('radius'));\n}\n\nmodule.exports = UrdfCylinder;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfColor = require('./UrdfColor');\n\n/**\n * A Material element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfMaterial(options) {\n  this.textureFilename = null;\n  this.color = null;\n\n  this.name = options.xml.getAttribute('name');\n\n  // Texture\n  var textures = options.xml.getElementsByTagName('texture');\n  if (textures.length > 0) {\n    this.textureFilename = textures[0].getAttribute('filename');\n  }\n\n  // Color\n  var colors = options.xml.getElementsByTagName('color');\n  if (colors.length > 0) {\n    // Parse the RBGA string\n    this.color = new UrdfColor({\n      xml : colors[0]\n    });\n  }\n}\n\nUrdfMaterial.prototype.isLink = function() {\n  return this.color === null && this.textureFilename === null;\n};\n\nvar assign = require('object-assign');\n\nUrdfMaterial.prototype.assign = function(obj) {\n    return assign(this, obj);\n};\n\nmodule.exports = UrdfMaterial;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Vector3 = require('../math/Vector3');\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Mesh element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfMesh(options) {\n  this.scale = null;\n\n  this.type = UrdfTypes.URDF_MESH;\n  this.filename = options.xml.getAttribute('filename');\n\n  // Check for a scale\n  var scale = options.xml.getAttribute('scale');\n  if (scale) {\n    // Get the XYZ\n    var xyz = scale.split(' ');\n    this.scale = new Vector3({\n      x : parseFloat(xyz[0]),\n      y : parseFloat(xyz[1]),\n      z : parseFloat(xyz[2])\n    });\n  }\n}\n\nmodule.exports = UrdfMesh;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Sphere element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfSphere(options) {\n  this.type = UrdfTypes.URDF_SPHERE;\n  this.radius = parseFloat(options.xml.getAttribute('radius'));\n}\n\nmodule.exports = UrdfSphere;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Pose = require('../math/Pose');\nvar Vector3 = require('../math/Vector3');\nvar Quaternion = require('../math/Quaternion');\n\nvar UrdfCylinder = require('./UrdfCylinder');\nvar UrdfBox = require('./UrdfBox');\nvar UrdfMaterial = require('./UrdfMaterial');\nvar UrdfMesh = require('./UrdfMesh');\nvar UrdfSphere = require('./UrdfSphere');\n\n/**\n * A Visual element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfVisual(options) {\n  var xml = options.xml;\n  this.origin = null;\n  this.geometry = null;\n  this.material = null;\n\n  this.name = options.xml.getAttribute('name');\n\n  // Origin\n  var origins = xml.getElementsByTagName('origin');\n  if (origins.length === 0) {\n    // use the identity as the default\n    this.origin = new Pose();\n  } else {\n    // Check the XYZ\n    var xyz = origins[0].getAttribute('xyz');\n    var position = new Vector3();\n    if (xyz) {\n      xyz = xyz.split(' ');\n      position = new Vector3({\n        x : parseFloat(xyz[0]),\n        y : parseFloat(xyz[1]),\n        z : parseFloat(xyz[2])\n      });\n    }\n\n    // Check the RPY\n    var rpy = origins[0].getAttribute('rpy');\n    var orientation = new Quaternion();\n    if (rpy) {\n      rpy = rpy.split(' ');\n      // Convert from RPY\n      var roll = parseFloat(rpy[0]);\n      var pitch = parseFloat(rpy[1]);\n      var yaw = parseFloat(rpy[2]);\n      var phi = roll / 2.0;\n      var the = pitch / 2.0;\n      var psi = yaw / 2.0;\n      var x = Math.sin(phi) * Math.cos(the) * Math.cos(psi) - Math.cos(phi) * Math.sin(the)\n          * Math.sin(psi);\n      var y = Math.cos(phi) * Math.sin(the) * Math.cos(psi) + Math.sin(phi) * Math.cos(the)\n          * Math.sin(psi);\n      var z = Math.cos(phi) * Math.cos(the) * Math.sin(psi) - Math.sin(phi) * Math.sin(the)\n          * Math.cos(psi);\n      var w = Math.cos(phi) * Math.cos(the) * Math.cos(psi) + Math.sin(phi) * Math.sin(the)\n          * Math.sin(psi);\n\n      orientation = new Quaternion({\n        x : x,\n        y : y,\n        z : z,\n        w : w\n      });\n      orientation.normalize();\n    }\n    this.origin = new Pose({\n      position : position,\n      orientation : orientation\n    });\n  }\n\n  // Geometry\n  var geoms = xml.getElementsByTagName('geometry');\n  if (geoms.length > 0) {\n    var geom = geoms[0];\n    var shape = null;\n    // Check for the shape\n    for (var i = 0; i < geom.childNodes.length; i++) {\n      var node = geom.childNodes[i];\n      if (node.nodeType === 1) {\n        shape = node;\n        break;\n      }\n    }\n    // Check the type\n    var type = shape.nodeName;\n    if (type === 'sphere') {\n      this.geometry = new UrdfSphere({\n        xml : shape\n      });\n    } else if (type === 'box') {\n      this.geometry = new UrdfBox({\n        xml : shape\n      });\n    } else if (type === 'cylinder') {\n      this.geometry = new UrdfCylinder({\n        xml : shape\n      });\n    } else if (type === 'mesh') {\n      this.geometry = new UrdfMesh({\n        xml : shape\n      });\n    } else {\n      console.warn('Unknown geometry type ' + type);\n    }\n  }\n\n  // Material\n  var materials = xml.getElementsByTagName('material');\n  if (materials.length > 0) {\n    this.material = new UrdfMaterial({\n      xml : materials[0]\n    });\n  }\n}\n\nmodule.exports = UrdfVisual;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfVisual = require('./UrdfVisual');\n\n/**\n * A Link element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfLink(options) {\n  this.name = options.xml.getAttribute('name');\n  this.visuals = [];\n  var visuals = options.xml.getElementsByTagName('visual');\n\n  for( var i=0; i<visuals.length; i++ ) {\n    this.visuals.push( new UrdfVisual({\n      xml : visuals[i]\n    }) );\n  }\n}\n\nmodule.exports = UrdfLink;\n","/**\n * @fileOverview\n * @author David V. Lu!! - davidvlu@gmail.com\n */\n\nvar Pose = require('../math/Pose');\nvar Vector3 = require('../math/Vector3');\nvar Quaternion = require('../math/Quaternion');\n\n/**\n * A Joint element in a URDF.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n */\nfunction UrdfJoint(options) {\n  this.name = options.xml.getAttribute('name');\n  this.type = options.xml.getAttribute('type');\n\n  var parents = options.xml.getElementsByTagName('parent');\n  if(parents.length > 0) {\n    this.parent = parents[0].getAttribute('link');\n  }\n\n  var children = options.xml.getElementsByTagName('child');\n  if(children.length > 0) {\n    this.child = children[0].getAttribute('link');\n  }\n\n  var limits = options.xml.getElementsByTagName('limit');\n  if (limits.length > 0) {\n    this.minval = parseFloat( limits[0].getAttribute('lower') );\n    this.maxval = parseFloat( limits[0].getAttribute('upper') );\n  }\n\n  // Origin\n  var origins = options.xml.getElementsByTagName('origin');\n  if (origins.length === 0) {\n    // use the identity as the default\n    this.origin = new Pose();\n  } else {\n    // Check the XYZ\n    var xyz = origins[0].getAttribute('xyz');\n    var position = new Vector3();\n    if (xyz) {\n      xyz = xyz.split(' ');\n      position = new Vector3({\n        x : parseFloat(xyz[0]),\n        y : parseFloat(xyz[1]),\n        z : parseFloat(xyz[2])\n      });\n    }\n\n    // Check the RPY\n    var rpy = origins[0].getAttribute('rpy');\n    var orientation = new Quaternion();\n    if (rpy) {\n      rpy = rpy.split(' ');\n      // Convert from RPY\n      var roll = parseFloat(rpy[0]);\n      var pitch = parseFloat(rpy[1]);\n      var yaw = parseFloat(rpy[2]);\n      var phi = roll / 2.0;\n      var the = pitch / 2.0;\n      var psi = yaw / 2.0;\n      var x = Math.sin(phi) * Math.cos(the) * Math.cos(psi) - Math.cos(phi) * Math.sin(the)\n          * Math.sin(psi);\n      var y = Math.cos(phi) * Math.sin(the) * Math.cos(psi) + Math.sin(phi) * Math.cos(the)\n          * Math.sin(psi);\n      var z = Math.cos(phi) * Math.cos(the) * Math.sin(psi) - Math.sin(phi) * Math.sin(the)\n          * Math.cos(psi);\n      var w = Math.cos(phi) * Math.cos(the) * Math.cos(psi) + Math.sin(phi) * Math.sin(the)\n          * Math.sin(psi);\n\n      orientation = new Quaternion({\n        x : x,\n        y : y,\n        z : z,\n        w : w\n      });\n      orientation.normalize();\n    }\n    this.origin = new Pose({\n      position : position,\n      orientation : orientation\n    });\n  }\n}\n\nmodule.exports = UrdfJoint;\n","exports.DOMImplementation = window.DOMImplementation;\nexports.XMLSerializer = window.XMLSerializer;\nexports.DOMParser = window.DOMParser;\n","/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfMaterial = require('./UrdfMaterial');\nvar UrdfLink = require('./UrdfLink');\nvar UrdfJoint = require('./UrdfJoint');\nvar DOMParser = require('@xmldom/xmldom').DOMParser;\n\n// See https://developer.mozilla.org/docs/XPathResult#Constants\nvar XPATH_FIRST_ORDERED_NODE_TYPE = 9;\n\n/**\n * A URDF Model can be used to parse a given URDF into the appropriate elements.\n *\n * @constructor\n * @param {Object} options\n * @param {Element} options.xml - The XML element to parse.\n * @param {string} options.string - The XML element to parse as a string.\n */\nfunction UrdfModel(options) {\n  options = options || {};\n  var xmlDoc = options.xml;\n  var string = options.string;\n  this.materials = {};\n  this.links = {};\n  this.joints = {};\n\n  // Check if we are using a string or an XML element\n  if (string) {\n    // Parse the string\n    var parser = new DOMParser();\n    xmlDoc = parser.parseFromString(string, 'text/xml');\n  }\n\n  // Initialize the model with the given XML node.\n  // Get the robot tag\n  var robotXml = xmlDoc.documentElement;\n\n  // Get the robot name\n  this.name = robotXml.getAttribute('name');\n\n  // Parse all the visual elements we need\n  for (var nodes = robotXml.childNodes, i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.tagName === 'material') {\n      var material = new UrdfMaterial({\n        xml : node\n      });\n      // Make sure this is unique\n      if (this.materials[material.name] !== void 0) {\n        if( this.materials[material.name].isLink() ) {\n          this.materials[material.name].assign( material );\n        } else {\n          console.warn('Material ' + material.name + 'is not unique.');\n        }\n      } else {\n        this.materials[material.name] = material;\n      }\n    } else if (node.tagName === 'link') {\n      var link = new UrdfLink({\n        xml : node\n      });\n      // Make sure this is unique\n      if (this.links[link.name] !== void 0) {\n        console.warn('Link ' + link.name + ' is not unique.');\n      } else {\n        // Check for a material\n        for( var j=0; j<link.visuals.length; j++ )\n        {\n          var mat = link.visuals[j].material;\n          if ( mat !== null && mat.name ) {\n            if (this.materials[mat.name] !== void 0) {\n              link.visuals[j].material = this.materials[mat.name];\n            } else {\n              this.materials[mat.name] = mat;\n            }\n          }\n        }\n\n        // Add the link\n        this.links[link.name] = link;\n      }\n    } else if (node.tagName === 'joint') {\n      var joint = new UrdfJoint({\n        xml : node\n      });\n      this.joints[joint.name] = joint;\n    }\n  }\n}\n\nmodule.exports = UrdfModel;\n","module.exports = require('object-assign')({\n    UrdfBox: require('./UrdfBox'),\n    UrdfColor: require('./UrdfColor'),\n    UrdfCylinder: require('./UrdfCylinder'),\n    UrdfLink: require('./UrdfLink'),\n    UrdfMaterial: require('./UrdfMaterial'),\n    UrdfMesh: require('./UrdfMesh'),\n    UrdfModel: require('./UrdfModel'),\n    UrdfSphere: require('./UrdfSphere'),\n    UrdfVisual: require('./UrdfVisual')\n}, require('./UrdfTypes'));\n","/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\n/**\n * If you use roslib in a browser, all the classes will be exported to a global variable called ROSLIB.\n *\n * If you use nodejs, this is the variable you get when you require('roslib').\n */\nvar ROSLIB = this.ROSLIB || {\n  /**\n   * @default\n   * @description Library version\n   */\n  REVISION : '1.4.1'\n};\n\nvar assign = require('object-assign');\n\n// Add core components\nassign(ROSLIB, require('./core'));\n\nassign(ROSLIB, require('./actionlib'));\n\nassign(ROSLIB, require('./math'));\n\nassign(ROSLIB, require('./tf'));\n\nassign(ROSLIB, require('./urdf'));\n\nmodule.exports = ROSLIB;\n","import { Ros, Topic, ActionClient, Goal, Service, ServiceRequest} from \"roslib\";\nimport errorSnippet from \"./audio/error.mp3\";\nimport succesSnippet from \"./audio/success.mp3\";\nimport pausedSnippet from \"./audio/paused.mp3\";\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nclass App {\n    private topicDisplayElement: HTMLElement;\n    private cameraElement: HTMLElement;\n    private cameraCorrectionElement: HTMLElement;\n    private ros: Ros;\n    private topic: Topic;\n    private camera_topic: Topic;\n    private camera_correction_topic_compressed: Topic;\n    private trajectoriesDropdownElement: HTMLSelectElement;\n\n    constructor(ipAddress: string) {\n        this.ipAddressElement = document.getElementById(\"ipAddressElement\") as HTMLInputElement;\n        this.loadAudioSnippets();\n        this.debugTopicDisplayElement = document.getElementById(\"debug_topic_display\");\n        if (!this.debugTopicDisplayElement) {\n            throw new Error(`Element with ID debug_topic_display not found.`);\n        }\n\n        this.cameraElement = document.getElementById(\"ros_img\");\n        if (!this.cameraElement) {\n            throw new Error(`Element with ID ros_img not found.`);\n        }\n\n        this.templatesDropdownElement = document.getElementById(\"template_dropdown\") as HTMLSelectElement;\n        this.cameraCorrectionElement = document.getElementById(\"img_corrections\");\n        if (!this.cameraCorrectionElement) {\n            throw new Error(`Element with ID img_corrections not found.`);\n        }\n        this.trashBin = document.getElementById(\"trash-bin\");\n        this.localize_button = document.getElementById(\"localize_button\");\n        this.automatic_template_button = document.getElementById(\"automatic_template\");\n        this.templateRecordElement = document.getElementById(\"template_name_record\") as HTMLInputElement;\n        this.speedFactorElement = document.getElementById(\"speed_factor\");\n\n        this.statusRecordingElement = document.getElementById(\"statusRecording\");\n        this.statusExecutingElement = document.getElementById(\"statusExecuting\");\n        this.statusPausedElement = document.getElementById(\"statusPaused\");\n        this.statusSpiralingElement = document.getElementById(\"statusSpiraling\");\n        this.statusCameraFeedbackElement = document.getElementById(\"statusCameraFeedback\");\n        this.statusStiffnessElement = document.getElementById(\"statusStiffness\");\n        this.statusGripperElement = document.getElementById(\"statusGripper\");\n\n        this.trajectoriesDropdownElement = document.getElementById(\"trajectories_dropdown\") as HTMLSelectElement;\n        this.skillsDropdownElement = document.getElementById(\"skills_dropdown\") as HTMLSelectElement;\n        if (!this.trajectoriesDropdownElement) {\n            throw new Error(`Element with ID trajectories_dropdown not found.`);\n        }\n        this.availableTrajectories = [];\n        this.availableSkills = [];\n        this.availableTemplates = [];\n\n        this.record_text_field = document.getElementById(\"recording_name\") as HTMLInputElement;\n        this.startApp(ipAddress);\n      }\n\n      private startApp(ipAddress: string) {\n        const rosUrl = \"ws://\" + ipAddress + \":9090\";\n        console.log(\"Connecting to ROS at \" + rosUrl);\n        this.ros = new Ros({ url: rosUrl });\n        this.debug_topic = new Topic({\n            ros: this.ros,\n            name: \"/debug\",\n            messageType: \"std_msgs/String\",\n        });\n        this.recording_topic = new Topic({\n          ros: this.ros,\n          name: \"/recording\",\n          messageType: \"std_msgs/Bool\",\n        });\n        this.camera_topic = new Topic({\n            ros: this.ros,\n            name: '/camera/color/image_raw/compressed',\n            messageType: 'sensor_msgs/CompressedImage',\n        });\n\n        this.camera_correction_topic_compressed = new Topic({\n            ros: this.ros,\n            name: '/sift_compressed/compressed',\n            messageType: 'sensor_msgs/CompressedImage',\n        });\n\n\n        this.order_menu = document.getElementById(\"menuContainer\");\n\n\n        this.setupRosTopic();\n        this.setupCameraRosTopic();\n        this.setupCameraCorrectionsRosTopic();\n        // home client\n        this.home_client = new ActionClient({\n          ros: this.ros,\n          serverName: '/lfdHome',\n          actionName: 'skills_manager/LfdHomeAction',\n        });\n        this.home_goal = new Goal({\n          actionClient: this.home_client,\n          goalMessage: {\n            height: 0.25,\n            side: 0.0,\n            front: 0.46,\n          },\n        });\n        this.home_goal.on('result', () => {\n          this.homing = false;\n          this.enable_all_main_buttons();\n        }\n        this.home_byod_goal = new Goal({\n          actionClient: this.home_client,\n          goalMessage: {\n            height: 0.15\n            side: 0.0,\n            front: 0.45,\n          },\n        });\n        this.home_byod_goal.on('result', () => {\n          this.homing = false;\n          this.enable_all_main_buttons();\n        }\n\n        // record client\n        this.record_client = new ActionClient({\n          ros: this.ros,\n          serverName: '/lfdRecord',\n          actionName: 'skills_manager/LfdRecordAction',\n        });\n\n        this.record_goal = new Goal({\n          actionClient: this.record_client,\n          goalMessage: {\n            skill_name: \"default\",\n          },\n        });\n        this.record_goal.on('result', () => {\n          this.recording = false;\n          this.refreshTrajectories();\n          this.enable_all_main_buttons();\n          this.statusRecordingElement.classList.remove(\"status-active\");\n        }\n        this.record_goal.on('feedback', (feedback) => {\n          if (feedback.paused === true) {\n            this.playSnippet('paused');\n            this.statusPausedElement.classList.add(\"status-active\");\n          }\n          if (feedback.spiraling === true) {\n            this.statusSpiralingElement.classList.add(\"status-active\");\n          }\n          if (feedback.camera_feedback === true) {\n            this.statusCameraFeedbackElement.classList.add(\"status-active\");\n          }\n          if (feedback.stiffness === true) {\n            this.statusStiffnessElement.classList.add(\"status-active\");\n          }\n          if (feedback.gripper === true) {\n            this.statusGripperElement.classList.add(\"status-active\");\n          }\n          if (feedback.paused === false) {\n            this.statusPausedElement.classList.remove(\"status-active\");\n          }\n          if (feedback.spiraling === false) {\n            this.statusSpiralingElement.classList.remove(\"status-active\");\n          }\n          if (feedback.camera_feedback === false) {\n            this.statusCameraFeedbackElement.classList.remove(\"status-active\");\n          }\n          if (feedback.stiffness === false) {\n            this.statusStiffnessElement.classList.remove(\"status-active\");\n          }\n          if (feedback.gripper === false) {\n            this.statusGripperElement.classList.remove(\"status-active\");\n          }\n        }\n\n        // execute client\n        this.execute_client = new ActionClient({\n          ros: this.ros,\n          serverName: '/lfdExecuteSkillSequence',\n          actionName: 'skills_manager/LfdExecuteSkillSequenceAction',\n        });\n\n        this.execute_goal = new Goal({\n          actionClient: this.execute_client,\n          goalMessage: {\n            skill_names: [],\n            localize_box: false,\n            speed_factor: 1,\n            template_name: \n            {\n              data: \"default\",\n            }\n          },\n        });\n        this.execute_goal.on('result', () => {\n          this.executing = false;\n          this.enable_all_main_buttons();\n          this.statusExecutingElement.classList.remove(\"status-active\");\n        }\n        this.execute_goal.on('feedback', (feedback) => {\n          if (feedback.spiraling === true) {\n            this.statusSpiralingElement.classList.add(\"status-active\");\n          }\n          if (feedback.camera_feedback === true) {\n            this.statusCameraFeedbackElement.classList.add(\"status-active\");\n          }\n          if (feedback.stiffness === true) {\n            this.statusStiffnessElement.classList.add(\"status-active\");\n          }\n          if (feedback.gripper === true) {\n            this.statusGripperElement.classList.add(\"status-active\");\n          }\n          if (feedback.spiraling === false) {\n            this.statusSpiralingElement.classList.remove(\"status-active\");\n          }\n          if (feedback.camera_feedback === false) {\n            this.statusCameraFeedbackElement.classList.remove(\"status-active\");\n          }\n          if (feedback.stiffness === false) {\n            this.statusStiffnessElement.classList.remove(\"status-active\");\n          }\n          if (feedback.gripper === false) {\n            this.statusGripperElement.classList.remove(\"status-active\");\n          }\n        }\n        // execute client\n        this.execute_skill_client = new ActionClient({\n          ros: this.ros,\n          serverName: '/lfdExecuteSkill',\n          actionName: 'skills_manager/LfdExecuteSkillAction',\n        });\n\n        this.execute_skill_goal = new Goal({\n          actionClient: this.execute_skill_client,\n          goalMessage: {\n            skill_name: [],\n            localize_box: false,\n            template_name: \"default\",\n          },\n        });\n        this.execute_skill_goal.on('result', () => {\n          this.executing = false;\n          this.enable_all_main_buttons();\n          this.statusExecutingElement.classList.remove(\"status-active\");\n        }\n        this.executing = false;\n        this.recording = false;\n        this.homing = false;\n\n        this.abort_gripper_client = new ActionClient({\n          ros: this.ros,\n          serverName: '/abort_gripper',\n          actionName: 'skills_manager/AbortGripperAction',\n        });\n\n        this.abort_gripper_goal = new Goal({\n          actionClient: this.abort_gripper_client,\n          goalMessage: {\n            open : false,\n          },\n        });\n\n        this.save_sift_template = new Service({\n          ros: this.ros,\n          name: '/saving_sift_template',\n          serviceType: 'platonics_vision/SavingTemplate',\n        });\n\n\n        this.list_trajectories = new Service({\n          ros: this.ros,\n          name: '/list_trajectories',\n          serviceType: 'skills_manager/ListTrajectories',\n        });\n        this.list_templates = new Service({\n          ros: this.ros,\n          name: '/list_templates',\n          serviceType: 'skills_manager/ListTemplates',\n        });\n        this.list_skills = new Service({\n          ros: this.ros,\n          name: '/list_skills',\n          serviceType: 'skills_manage/ListSkills',\n        });\n\n        this.reset_transformation = new Service({\n          ros: this.ros,\n          name: '/reset_transformation',\n          serviceType: 'std_srvs/Trigger',\n        });\n        this.refreshTemplates();\n    }\n\n    public restartApp() {\n      const ip_address = this.ipAddressElement.value;\n      this.ros.close();\n      this.startApp(ip_address);\n    }\n\n    public cancel() {\n      this.playSnippet('error');\n      this.execute_client.cancel();\n      this.record_client.cancel();\n      this.home_client.cancel();\n      this.enable_all_main_buttons();\n    }\n\n    public home_gripper() {\n      this.abort_gripper_client.cancel();\n      this.log(\"Homing gripper\");\n      this.abort_gripper_goal.goalMessage.goal.open = true;\n      this.abort_gripper_goal.send();\n    }\n\n    public abort_gripper() {\n      this.abort_gripper_client.cancel();\n      this.log(\"Aborting gripper\");\n      this.abort_gripper_goal.goalMessage.goal.open = false;\n      this.abort_gripper_goal.send();\n    }\n\n\n    public selectTrajectory() {\n      var skill_name = this.trajectoriesDropdownElement.value;\n      const newItem = document.createElement(\"div\");\n      newItem.classList.add(\"menu-item\");\n      newItem.setAttribute(\"draggable\", \"true\");\n      newItem.textContent = skill_name;\n      this.order_menu.appendChild(newItem);\n      this.addDragAndDropHandlers(newItem);\n    }\n\n    public selectSkill() {\n      var skill_name = this.skillsDropdownElement.value;\n      const newItem = document.createElement(\"div\");\n      newItem.classList.add(\"menu-item\");\n      newItem.setAttribute(\"draggable\", \"true\");\n      newItem.textContent = skill_name;\n      this.order_menu.appendChild(newItem);\n      this.addDragAndDropHandlers(newItem);\n    }\n\n    public clearMenu() {\n      this.order_menu.innerHTML = \"\";\n    }\n\n    public selectTemplate() {\n      this.refreshTrajectories();\n      this.refreshSkills();\n    }\n\n    public addDragAndDropHandlers(item) {\n      item.addEventListener(\"dragstart\", () => {\n        this.draggedItem = item;\n        setTimeout(() => {\n          item.classList.add(\"dragging\");\n        }, 0);\n      });\n\n      item.addEventListener(\"dragend\", () => {\n        setTimeout(() => {\n          item.classList.remove(\"dragging\");\n          this.draggedItem = null;\n        }, 0);\n      });\n      \n      item.addEventListener(\"dragover\", (e) => {\n        e.preventDefault();\n        item.classList.add(\"over\");\n      });\n\n      item.addEventListener(\"dragleave\", () => {\n        item.classList.remove(\"over\");\n      });\n\n      item.addEventListener(\"drop\", () => {\n        item.classList.remove(\"over\");\n        if (this.draggedItem !== item) {\n          let menu = item.parentNode;\n          let siblings = [...menu.children];\n          let targetIndex = siblings.indexOf(item);\n          let draggedIndex = siblings.indexOf(this.draggedItem);\n\n          if (targetIndex < draggedIndex) {\n            menu.insertBefore(this.draggedItem, item);\n          } else {\n            menu.insertBefore(this.draggedItem, item.nextSibling);\n          }\n        }\n      });\n      this.trashBin.addEventListener(\"dragover\", (e) => {\n        e.preventDefault();\n        this.trashBin.classList.add(\"over-trash\");\n      });\n\n      this.trashBin.addEventListener(\"dragleave\", () => {\n        this.trashBin.classList.remove(\"over-trash\");\n      });\n\n      this.trashBin.addEventListener(\"drop\", () => {\n        this.trashBin.classList.remove(\"over-trash\");\n\n        // Remove the dragged item from the DOM when dropped into the trash bin\n        if (this.draggedItem) {\n          this.draggedItem.remove();\n          this.draggedItem = null;\n        }\n      });\n\n    }\n\n    public saveSiftTemplate() {\n      const request = {template_name: {data: this.templateRecordElement.value}};\n      this.save_sift_template.callService(request, (result) => {\n        console.log(\"Saving template: \" + result.success);\n      });\n    }\n\n    private playSnippet(snippetKey: string) {\n      const audio = this.audioSnippets[snippetKey];\n      if (audio) {\n          audio.currentTime = 0; // Reset playback to the beginning\n          audio.play();\n      } else {\n          console.error(`Audio snippet ${snippetKey} not found`);\n      }\n    }\n\n    private loadAudioSnippets() {\n      this.audioSnippets = {\n          success: new Audio(succesSnippet),\n          error: new Audio(errorSnippet),\n          paused: new Audio(pausedSnippet),\n      };\n    }\n\n\n    public refreshTrajectories() {\n      const request = new ServiceRequest({});\n      request.template_name = this.templatesDropdownElement.value\n      this.list_trajectories.callService(request, (result) => {\n        this.availableTrajectories = result.trajectories;\n        this.availableTrajectories.unshift(\"---select---\");\n        this.updateTrajectoriesDropdown();\n      });\n    }\n\n    public refreshSkills() {\n      const request = new ServiceRequest({});\n      request.template_name = this.templatesDropdownElement.value\n      this.list_skills.callService(request, (result) => {\n        this.availableSkills = result.skills;\n        this.availableSkills.unshift(\"---select---\");\n        this.updateSkillsDropdown();\n      });\n    }\n\n    public refreshTemplates() {\n      this.list_templates.callService(new ServiceRequest({}), (result) => {\n        this.availableTemplates = result.templates;\n        this.availableTemplates.unshift(\"---select---\");\n        this.updateTemplatesDropdown();\n      });\n      //this.emptyMenu();\n    }\n\n    public resetTransformation() {\n      this.reset_transformation.callService(new ServiceRequest({}), (result) => {\n        console.log(\"Reset transformation\");\n      });\n    }\n\n    private updateTemplatesDropdown() {\n      const sortedTemplates = [...this.availableTemplates].sort();\n      this.templatesDropdownElement.innerHTML = '';\n      sortedTemplates.forEach((template) => {\n          const option = document.createElement('option');\n          option.value = template;\n          option.textContent = template;\n          this.templatesDropdownElement.appendChild(option);\n      });\n    }\n\n    private updateTrajectoriesDropdown() {\n      const sortedTrajectories = [...this.availableTrajectories].sort();\n      this.trajectoriesDropdownElement.innerHTML = '';\n      sortedTrajectories.forEach((trajectory) => {\n          const option = document.createElement('option');\n          option.value = trajectory;\n          option.textContent = trajectory;\n          this.trajectoriesDropdownElement.appendChild(option);\n      });\n    }\n\n    private updateSkillsDropdown() {\n      const sortedSkills = [...this.availableSkills].sort();\n      this.skillsDropdownElement.innerHTML = '';\n      sortedSkills.forEach((skill) => {\n          const option = document.createElement('option');\n          option.value = skill;\n          option.textContent = skill;\n          this.skillsDropdownElement.appendChild(option);\n      });\n    }\n\n    public disable_all_main_buttons() {\n      var buttons = document.getElementsByClassName(\"main-button\");\n      for (var i = 0; i < buttons.length; i++) {\n        buttons[i].setAttribute(\"disabled\", \"true\");\n      }\n    }\n\n    public enable_all_main_buttons() {\n      var buttons = document.getElementsByClassName(\"main-button\");\n      for (var i = 0; i < buttons.length; i++) {\n        buttons[i].removeAttribute(\"disabled\");\n      }\n    }\n\n\n\n\n    public sendHome() {\n      this.disable_all_main_buttons();\n      this.homing = true;\n      this.home_goal.send();\n    }\n\n    public sendHomeBYOD() {\n      this.disable_all_main_buttons();\n      this.homing = true;\n      this.home_byod_goal.send();\n    }\n\n    public execute_skill() {\n      var items = document.getElementsByClassName(\"menu-item\");\n      console.log(\"executing skill\")\n      this.execute_skill_goal.goalMessage.goal.skill_name = items[0].textContent;\n      console.log(items[0].textContent);\n      if this.automatic_template_button.checked {\n        this.execute_skill_goal.goalMessage.goal.template_name = \"\";\n      } else {\n        this.execute_skill_goal.goalMessage.goal.template_name = this.templatesDropdownElement.value;\n      }\n      this.execute_skill_goal.goalMessage.goal.localize_box = this.localize_button.checked;\n      //this.localize_button.checked;\n      this.disable_all_main_buttons();\n      this.execute_skill_goal.send();\n    }\n\n\n\n    public execute() {\n      this.statusExecutingElement.classList.add(\"status-active\");\n      var items = document.getElementsByClassName(\"menu-item\");\n      var skill_names: string[] = [];\n      for (var i = 0; i < items.length; i++) {\n        skill_names.push(items[i].textContent || \"\"); // Ensure textContent is not null\n      }\n      this.execute_goal.goalMessage.goal.template_name = this.templatesDropdownElement.value;\n      this.execute_goal.goalMessage.goal.skill_names = skill_names;\n      // convert string to float\n      this.execute_goal.goalMessage.goal.speed_factor = parseFloat(this.speedFactorElement.value);\n      this.execute_goal.goalMessage.goal.localize_box = this.localize_button.checked;\n      this.disable_all_main_buttons();\n      this.execute_goal.send();\n    }\n\n\n\n    public record() {\n      this.disable_all_main_buttons();\n      this.statusRecordingElement.classList.add(\"status-active\");\n      this.record_goal.goalMessage.goal.skill_name = this.record_text_field.value;\n      this.record_goal.goalMessage.goal.template_name = this.templatesDropdownElement.value;\n      this.record_goal.send();\n    }\n\n    private setupCameraRosTopic() {\n        this.camera_topic.subscribe((message: Message) => {\n            this.cameraElement.src = 'data:image/jpeg;base64,' + message.data;\n        });\n    }\n\n    private setupCameraCorrectionsRosTopic() {\n      this.camera_correction_topic_compressed.subscribe((message: Message) => {\n          console.log(\"Received camera correction\");\n          //console.log(message.data);\n          this.cameraCorrectionElement.src = 'data:image/jpeg;base64,' + message.data;\n        });\n    }\n\n\n\n   private setupRosTopic() {\n    this.debug_topic.subscribe((message) => {\n        \n        // Create a new message element\n        const newMessage = document.createElement('div');\n        newMessage.classList.add('debug-message');\n        newMessage.textContent = message.data;\n\n        // Prepend the new message to the debug window (at the top)\n        this.debugTopicDisplayElement.prepend(newMessage);\n\n        // Get all message elements\n        const allMessages = this.debugTopicDisplayElement.querySelectorAll('.debug-message');\n\n        // If more than 3 messages, fade out the oldest one\n        if (allMessages.length > 3) {\n            const oldestMessage = allMessages[allMessages.length - 1];\n            oldestMessage.style.opacity = '0';  // Fade out\n            setTimeout(() => oldestMessage.remove(), 500);  // Remove after fading out\n        }\n      });\n    }\n\n    public startDataRecord() {\n      this.recording_topic.publish({\n        data: true,\n      });\n    }\n\n    public stopDataRecord() {\n      this.recording_topic.publish({\n        data: false,\n      });\n    }\n\n\n    public log(message: string) {\n        this.debug_topic.publish({\n            data: message,\n        });\n    }\n}\n\n// Instantiate the App class when the DOM is fully loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    const app = new App(\"172.16.0.3\");\n    // Expose the app instance to the global scope for the button's onclick handler\n    (window as any).app = app;\n});\n\n\n"]}